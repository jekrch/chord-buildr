{"version":3,"sources":["utils/pianoHelper.js","utils/noteManager.js","utils/chordManager.js","utils/chordCodeHandler.js","utils/transposer.js","utils/chordPianoHandler.js","components/context/AppContext.js","utils/synthPlayer.js","components/Layout/HeaderComponent.js","components/Key.js","components/PianoComponent.js","components/ChordInput.js","components/ChordPianoComponent.js","components/PianoBoardComponent.js","components/Layout/FooterComponent.js","public/images/GitHub120.png","App.js","reportWebVitals.js","index.js"],"names":["pianoKeys","note","color","pianoGenerator","piano","i","pianoKeysOctave","z","length","newKey","key","selected","noteNumber","octave","push","noteLetterMapWithSharps","1","2","3","4","5","6","7","8","9","10","11","12","noteLetterMapWithFlats","noteNumberMap","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","formatNoteName","letter","charAt","toUpperCase","toLowerCase","getNoteNumber","getNoteLetter","number","noteIndex","normalizeNoteNumber","noteLetterMap","getNoteLetterMapByKey","normalizeNote","chordMap","m","m6","m7","m9","maj7","maj9","maj13","13","dim","dim7","sus2","sus4","aug","add9","add2","mM7","m11","m13","m7b9","m7b5","x","getChordFromCode","chordCode","string","type","chord","replace","includes","startIndex","indexOf","fbCode","substring","console","log","removeFbclid","split","isNaN","Number","extractOctave","isKey","indexOfType","slashNote","pop","slash","processSlashChord","noteLetter","slice","ex","undefined","Object","values","getProgressionCode","state","code","chordPianoSet","chordPiano","selectedChord","isProgKey","isSlashChord","updateFlatOrSharpLetter","showFlats","getStepsChanged","newSelectedKey","originalNoteLetter","newNoteLetter","originalNoteNumber","getTransposedSelectedKey","stepsChanged","selectedKey","originalOctave","newNote","getTransposedNote","newNoteNumber","selectChordKeys","selectChordKeysWithType","selectAutomatedChordKeys","userSelection","hasSelectedNotes","rendered","chordIsAlreadySelected","chordNotes","pianoOctave","clearPianoSelections","notes","forEach","chordNoteNumber","pianoControl","noteIsInvalid","noteKey","isStopping","selectNote","selectChordNotes","getChordNotes","chordRootNoteNumber","slashNoteNumber","chordNoteNumbers","firstNote","rooteNoteNumber","octaveAllowance","octaveDecrement","octaveIncrementRequired","Math","ceil","noteOctaveDecrement","getOctaveDecrementIfNeeded","array","filter","n","removeNoteFromArray","every","shiftedUp","shiftChordNotesUpIfBelowFirstNote","arrangeChordNotesFromFirstNote","getOctaveAdjustedChordNumbersWithFirstNote","rootNoteNumber","chordType","intervalList","getNoteNumberChord","j","createChordPiano","id","transposePianoBoard","pianoId","originalChordPiano","absoluteStepsChanged","getAbsoluteStepsChanged","originalLowestAbsoluteNote","getLowestAbsoluteNoteFromSelectedChord","setNewChordKey","moveChordTowardTonicIfNeeded","newChordPianoSelectedKey","newLowestNote","keyChangeDiffSteps","abs","transposing","originalChordNotes","STATE_NAME","initialState","history","previousProgCodes","currentProgCode","building","getChordPiano","getPianoById","chordPianoResults","buildProgFromCode","decodeURIComponent","chordArray","progKeySet","validateProgKey","updateUrlProgressionCode","progressionCode","progressionCodeUrl","search","persistedState","JSON","parse","sessionStorage","getItem","finalInitialState","appReducer","action","map","payload","nextChordpianoId","nextId","max","getNextId","concat","item","keyChecked","clearProgKey","setProgKey","lastProgIndex","changed","splice","AppContext","createContext","AppProvider","props","useReducer","dispatch","useEffect","setItem","stringify","Provider","value","children","synth","playPiano","pianoComponent","Tone","toDestination","isMobile","set","latencyHint","selectedNotes","octaveIndex","isPlaying","getSelectedNotes","releaseAll","triggerAttackRelease","setTimeout","clearPianoKeyPlaying","HeaderComponent","useContext","useState","newChordAdded","setNewChordAdded","targetKey","scroller","scrollTo","duration","smooth","offset","spy","hashSpy","to","Navbar","fixed","className","Button","variant","size","onClick","style","listStyle","isDynamic","handleItemClick","Key","pianoKey","handleClick","key-selected","key-playing","key-stopping","PianoComponent","pianoComponentId","handleClickRemovePiano","aria-label","aria-hidden","ChordInput","chordRef","useRef","current","selectedChordKey","slashChord","noteArray","getNoteArray","chordTypeArray","keys","Form","Group","controlId","Control","as","custom","onChange","e","target","handleKeySelectChange","option","index","handleTypeSelectChange","Check","label","checked","handleIsKeyChecked","handleIsSlashChordChecked","handleIsFlatKeyChecked","display-option","handleSlashChordNoteChange","ChordPianoComponent","PianoBoardComponent","useHistory","React","updateState","forceUpdate","useCallback","currentCode","newParams","location","hash","buildChordsFromUrl","FooterComponent","modalShow","setModalShow","AboutModal","Modal","aria-labelledby","centered","Header","closeButton","Body","xmlns","width","height","fill","class","viewBox","d","fill-rule","href","Date","getFullYear","Brand","src","alt","show","onHide","App","exact","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.97411ecf.chunk.js","sourcesContent":["const pianoKeys = [\r\n  {\r\n    note: \"C\",\r\n    color: \"white\"\r\n  },\r\n  {\r\n    note: \"C#\",\r\n    color: \"black\"\r\n  },\r\n  {\r\n    note: \"D\",\r\n    color: \"white\"\r\n  },\r\n  {\r\n    note: \"D#\",\r\n    color: \"black\"\r\n  },\r\n  {\r\n    note: \"E\",\r\n    color: \"white\"\r\n  },\r\n  {\r\n    note: \"F\",\r\n    color: \"white\"\r\n  },\r\n  {\r\n    note: \"F#\",\r\n    color: \"black\"\r\n  },\r\n  {\r\n    note: \"G\",\r\n    color: \"white\"\r\n  },\r\n  {\r\n    note: \"G#\",\r\n    color: \"black\"\r\n  },\r\n  {\r\n    note: \"A\",\r\n    color: \"white\"\r\n  },\r\n  {\r\n    note: \"A#\",\r\n    color: \"black\"\r\n  },\r\n  {\r\n    note: \"B\",\r\n    color: \"white\"\r\n  }\r\n]\r\n\r\nexport const pianoGenerator = () => {\r\n  let piano = []\r\n  let octaves = 3\r\n  for (let i = 0; i < octaves; i++) {\r\n    //i is each octave\r\n    var pianoKeysOctave = []\r\n\r\n    for (let z = 0; z < pianoKeys.length; z++) {\r\n      var newKey = {}\r\n      var key = pianoKeys[z]\r\n\r\n      newKey.note = key.note\r\n      newKey.color = key.color\r\n      newKey.selected = false\r\n      newKey.noteNumber = z + 1\r\n      newKey.octave = i\r\n      pianoKeysOctave.push(newKey)\r\n    }\r\n\r\n    piano.push(pianoKeysOctave)\r\n  }\r\n  return piano\r\n}\r\n\r\n// deselect all keys in the provided piano\r\nexport function clearPianoSelections(piano) {\r\n  for (let i = 0; i < piano.length; i++) {\r\n    var pianoOctave = piano[i]\r\n\r\n    for (let z = 0; z < pianoOctave.length; z++) {\r\n      var key = pianoOctave[z]\r\n      key.selected = false\r\n    }\r\n  }\r\n}\r\n","export const noteLetterMapWithSharps = {\r\n  1: \"C\",\r\n  2: \"C#\",\r\n  3: \"D\",\r\n  4: \"D#\",\r\n  5: \"E\",\r\n  6: \"F\",\r\n  7: \"F#\",\r\n  8: \"G\",\r\n  9: \"G#\",\r\n  10: \"A\",\r\n  11: \"A#\",\r\n  12: \"B\"\r\n}\r\n\r\nexport const isValidLetter = (letter) => {\r\n  if (letter.includes(\"b\")) {\r\n    return Object.values(noteLetterMapWithFlats).includes(letter)\r\n  } else {\r\n    return Object.values(noteLetterMapWithSharps).includes(letter)\r\n  }\r\n}\r\n\r\nexport const noteLetterMapWithFlats = {\r\n  1: \"C\",\r\n  2: \"Db\",\r\n  3: \"D\",\r\n  4: \"Eb\",\r\n  5: \"E\",\r\n  6: \"F\",\r\n  7: \"Gb\",\r\n  8: \"G\",\r\n  9: \"Ab\",\r\n  10: \"A\",\r\n  11: \"Bb\",\r\n  12: \"B\"\r\n}\r\n\r\n// includes both sharps and flats\r\nexport const noteNumberMap = {\r\n  C: 1,\r\n  \"C#\": 2,\r\n  Db: 2,\r\n  D: 3,\r\n  \"D#\": 4,\r\n  Eb: 4,\r\n  E: 5,\r\n  F: 6,\r\n  \"F#\": 7,\r\n  Gb: 7,\r\n  G: 8,\r\n  \"G#\": 9,\r\n  Ab: 9,\r\n  A: 10,\r\n  \"A#\": 11,\r\n  Bb: 11,\r\n  B: 12\r\n}\r\n\r\n// sharps - c / g / d / a / e / b / f# / c#\r\n// flats  - f / Bb / Eb / Ab / Db / Gb / Cb\r\n\r\nexport function getNoteLetterMapByKey(key) {\r\n  key = formatNoteName(key)\r\n\r\n  switch (key) {\r\n    case \"C\":\r\n    case \"C#\":\r\n    case \"D\":\r\n    case \"E\":\r\n    case \"F#\":\r\n    case \"G\":\r\n    case \"A\":\r\n    case \"B\":\r\n      return noteLetterMapWithSharps\r\n\r\n    case \"G#\":\r\n    case \"Ab\":\r\n    case \"A#\":\r\n    case \"Bb\":\r\n    case \"Cb\":\r\n    case \"Db\":\r\n    case \"D#\":\r\n    case \"Eb\":\r\n    case \"F\":\r\n    case \"Gb\":\r\n      return noteLetterMapWithFlats\r\n\r\n    default:\r\n      return noteLetterMapWithFlats\r\n  }\r\n}\r\n\r\n// converts note letter to the correct case\r\n// (e.g. aB -> Ab; c# -> C#)\r\nexport function formatNoteName(letter) {\r\n  return letter.charAt(0).toUpperCase() + letter.charAt(1).toLowerCase()\r\n}\r\n\r\n// Get the number corresponding to the provide note letter\r\nexport function getNoteNumber(letter) {\r\n  if (!letter) return\r\n\r\n  letter = formatNoteName(letter)\r\n\r\n  return noteNumberMap[letter]\r\n}\r\n\r\n// get the letter corresponding to the provided note number\r\nexport function getNoteLetter(key, number) {\r\n  var noteIndex = normalizeNoteNumber(number)\r\n\r\n  var noteLetterMap = getNoteLetterMapByKey(key)\r\n\r\n  var letter = noteLetterMap[noteIndex]\r\n\r\n  return formatNoteName(letter)\r\n}\r\n\r\nexport function normalizeNoteNumber(noteNumber) {\r\n  while (noteNumber > 12) {\r\n    noteNumber = noteNumber - 12\r\n  }\r\n\r\n  while (noteNumber < 1) {\r\n    noteNumber = noteNumber + 12\r\n  }\r\n\r\n  return noteNumber\r\n}\r\n\r\n/***\r\n * if the note is over 12, find the corresponding note in the next octave\r\n   or if we're at the highest octave, bring the note down 12\r\n */\r\nexport function normalizeNote(noteNumber, octave) {\r\n  while (noteNumber > 12) {\r\n    noteNumber = noteNumber - 12\r\n\r\n    if (octave < 2) {\r\n      octave++\r\n    }\r\n  }\r\n\r\n  while (noteNumber < 1) {\r\n    noteNumber = noteNumber + 12\r\n\r\n    if (octave !== 0) {\r\n      octave--\r\n    }\r\n  }\r\n\r\n  return { noteNumber, octave }\r\n}\r\n","import { getNoteLetter } from \"./noteManager\"\r\n\r\nexport const chordMap = {\r\n  \"\": [0, 4, 7],\r\n  m: [0, 3, 7],\r\n  m6: [0, 3, 7, 9],\r\n  m7: [0, 3, 7, 10],\r\n  m9: [0, 3, 7, 10, 14],\r\n  maj7: [0, 4, 7, 11],\r\n  maj9: [0, 4, 7, 11, 14],\r\n  maj13: [0, 4, 7, 11, 14, 21],\r\n  6: [0, 4, 7, 9],\r\n  5: [0, 7],\r\n  7: [0, 4, 7, 10],\r\n  9: [0, 4, 7, 10, 14],\r\n  11: [0, 4, 7, 10, 14, 17],\r\n  13: [0, 4, 7, 10, 14, 17, 21],\r\n  \"6/9\": [0, 4, 7, 9, 14],\r\n  dim: [0, 3, 6],\r\n  dim7: [0, 3, 6, 9],\r\n  sus2: [0, 2, 7],\r\n  sus4: [0, 5, 7],\r\n  aug: [0, 4, 8],\r\n  add9: [0, 4, 7, 14],\r\n  add2: [0, 2, 4, 7],\r\n  mM7: [0, 3, 7, 11],\r\n  m11: [0, 3, 7, 10, 14, 17],\r\n  m13: [0, 3, 7, 10, 14, 17, 21],\r\n  \"7sus4\": [0, 5, 7, 10],\r\n  \"7b9\": [0, 4, 7, 10, 13],\r\n  \"7#5\": [0, 4, 8, 10],\r\n  \"7b5\": [0, 4, 6, 10],\r\n  \"7#11\": [0, 4, 7, 10, 18],\r\n  \"m7#9\": [0, 3, 7, 10, 15],\r\n  m7b9: [0, 3, 7, 10, 13],\r\n  \"m7#5\": [0, 3, 8, 10],\r\n  m7b5: [0, 3, 6, 10],\r\n  \"m7#11\": [0, 3, 7, 10, 18],\r\n  \"9sus4\": [0, 5, 7, 10, 14],\r\n  \"+\": [0, 4, 8],\r\n  x: [0]\r\n}\r\n\r\nexport const isValidChordType = (type) => {\r\n  return chordMap[type] !== undefined\r\n}\r\n\r\n// returns the note numbers for the specified chord (1, 5, 8)\r\nexport function getNoteNumberChord(rootNoteNumber, chordType) {\r\n  var intervalList = chordMap[chordType]\r\n  var chordNoteNumbers = []\r\n\r\n  for (var i = 0; i < intervalList.length; i++) {\r\n    var noteNumber = rootNoteNumber + intervalList[i]\r\n    chordNoteNumbers.push(noteNumber)\r\n  }\r\n\r\n  return chordNoteNumbers\r\n}\r\n\r\n// returns the note letters for the specified chord (e.g. C, E, G)\r\nexport function getNoteLettersChord(key, rootNoteNumber, chordType) {\r\n  var intervalList = chordMap[chordType]\r\n  var chordNoteLetters = []\r\n\r\n  for (var i = 0; i < intervalList.length; i++) {\r\n    var noteNumber = rootNoteNumber + intervalList[i]\r\n    var noteLetter = getNoteLetter(key, noteNumber)\r\n\r\n    chordNoteLetters.push(noteLetter)\r\n  }\r\n\r\n  return chordNoteLetters\r\n}\r\n","import { isValidChordType } from \"./chordManager\"\r\nimport { isValidLetter, getNoteNumber } from \"./noteManager\"\r\nimport {\r\n  noteLetterMapWithSharps,\r\n  noteLetterMapWithFlats\r\n} from \"../utils/noteManager\"\r\n\r\n/***\r\n * get the octave from the start of the code\r\n */\r\nexport function extractOctave(chordCode, chord) {\r\n  var octave = chordCode.substring(0, 1)\r\n\r\n  if (!octave || isNaN(octave) || Number(octave) < 0) {\r\n    octave = 0\r\n  } else if (Number(octave) > 2) {\r\n    octave = 2\r\n  }\r\n\r\n  return octave\r\n}\r\n\r\nexport function getChordFromCode(chordCode) {\r\n  var chord = {}\r\n\r\n  try {\r\n    chordCode = chordCode.replace(\"(\", \"\")\r\n\r\n    // this might show up in the progression code due to facebook url processing\r\n    // it should be ignored\r\n    if (chordCode.includes(\"&amp\")) return\r\n\r\n    if (chordCode.includes(\"&fbclid\")) {\r\n      chordCode = removeFbclid(chordCode)\r\n    }\r\n\r\n    chordCode = chordCode.split(\"#piano-\")[0]\r\n\r\n    chord.octave = extractOctave(chordCode, chord)\r\n\r\n    chordCode = chordCode.replace(\")\", \"\")\r\n\r\n    chord.isKey = chordCode.includes(\"*\")\r\n    chordCode = chordCode.replace(\"*\", \"\")\r\n\r\n    chordCode = processSlashChord(chordCode, chord)\r\n\r\n    var indexOfType =\r\n      chordCode.substring(2, 3) === \"#\" || chordCode.substring(2, 3) === \"b\"\r\n        ? 3\r\n        : 2\r\n\r\n    chord.noteLetter = capitalizeFirstLetter(\r\n      chordCode.substring(1, indexOfType)\r\n    )\r\n    chord.type = chordCode.substring(indexOfType)\r\n\r\n    console.log(chord)\r\n  } catch (ex) {\r\n    console.log(ex)\r\n    console.log(\"Exception - invalid chord code: \" + chordCode)\r\n    return\r\n  }\r\n\r\n  if (!(isValidChordType(chord.type) && isValidLetter(chord.noteLetter))) {\r\n    console.log(\r\n      \"Invalid chord code: \" +\r\n        chordCode +\r\n        \"; letter: \" +\r\n        chord.noteLetter +\r\n        \"; type: \" +\r\n        chord.type\r\n    )\r\n    return\r\n  }\r\n\r\n  return chord\r\n}\r\n\r\n/***\r\n * if an fbclid was inserted into the code, remove it here\r\n */\r\nfunction removeFbclid(chordCode) {\r\n  var startIndex = chordCode.indexOf(\"&fbclid\")\r\n  var fbCode = chordCode.substring(startIndex, startIndex + 69)\r\n  chordCode = chordCode.replace(fbCode, \"\")\r\n  console.log(\"fbCode removed: \" + fbCode)\r\n  return chordCode\r\n}\r\n\r\nfunction processSlashChord(chordCode, chord) {\r\n  if (chordCode.includes(\":\")) {\r\n    var slashNote = chordCode.split(\":\").pop()\r\n\r\n    chord.slashNote = slashNote\r\n    chord.slash = true\r\n\r\n    chordCode = chordCode.replace(\":\" + slashNote, \"\")\r\n  }\r\n  return chordCode\r\n}\r\n\r\nexport function getProgressionCode(state) {\r\n  var code = \"\"\r\n\r\n  for (let i = 0; i < state.chordPianoSet.length; i++) {\r\n    var chordPiano = state.chordPianoSet[i]\r\n    var selectedChord = chordPiano.selectedChord\r\n\r\n    if (!selectedChord) continue\r\n\r\n    var chordCode =\r\n      selectedChord.octave + selectedChord.noteLetter + selectedChord.type\r\n\r\n    if (chordPiano.isProgKey) chordCode += \"*\"\r\n\r\n    if (isSlashChord(selectedChord)) {\r\n      selectedChord.slashNote = updateFlatOrSharpLetter(\r\n        chordPiano.showFlats,\r\n        selectedChord.slashNote\r\n      )\r\n\r\n      chordCode += \":\" + selectedChord.slashNote\r\n    }\r\n\r\n    code += `(${chordCode})`\r\n  }\r\n\r\n  return code\r\n}\r\n\r\nexport function isSlashChord(selectedChord) {\r\n  return (\r\n    selectedChord.slash &&\r\n    selectedChord.slashNote &&\r\n    selectedChord.slashNote !== \"\"\r\n  )\r\n}\r\n\r\nfunction capitalizeFirstLetter(string) {\r\n  return string.charAt(0).toUpperCase() + string.slice(1)\r\n}\r\n\r\n/***\r\n * If the chordPiano is set to show flats and the provided letter is sharp,\r\n * find the corresponding flat letter. Likewise, if the chordPiano is\r\n * set to show sharps\r\n */\r\n\r\nexport function updateFlatOrSharpLetter(showFlats, noteLetter) {\r\n  var noteNumber = getNoteNumber(noteLetter)\r\n\r\n  if (showFlats) {\r\n    if (noteLetter.includes(\"#\")) {\r\n      return noteLetterMapWithFlats[noteNumber]\r\n    }\r\n  } else if (noteLetter.includes(\"b\")) {\r\n    return noteLetterMapWithSharps[noteNumber]\r\n  }\r\n\r\n  return noteLetter\r\n}\r\n","import { updateFlatOrSharpLetter } from \"./chordCodeHandler\"\r\nimport { getNoteNumber, getNoteLetter, normalizeNote } from \"./noteManager\"\r\n\r\n// returns the note numbers for the specified chord with the indicated\r\n// transposition applied to each note\r\nexport function shiftChord(originalKeyNumber, newKeyNumber, chordNoteNumbers) {\r\n  var negativeTransposeModifier = originalKeyNumber - newKeyNumber\r\n\r\n  // determine whether the new chord needs to shift up or down\r\n  // and octave in order to stay within the keyboard range\r\n  var requiredOctaveModifier = getRequiredOctaveModifier(\r\n    negativeTransposeModifier,\r\n    chordNoteNumbers\r\n  )\r\n\r\n  var newChordNoteNumbers = []\r\n\r\n  for (var i = 0; i < chordNoteNumbers.length; i++) {\r\n    var noteNumber = chordNoteNumbers[i] - negativeTransposeModifier\r\n\r\n    // if the chord needed to be shifted up or down and octave\r\n    // apply that here\r\n    noteNumber = noteNumber + requiredOctaveModifier\r\n\r\n    // in the rare case that we're still outside the range\r\n    // address that here\r\n    noteNumber = sanitizeKeyLocation(noteNumber)\r\n\r\n    newChordNoteNumbers.push(noteNumber)\r\n  }\r\n\r\n  return newChordNoteNumbers\r\n}\r\n\r\n// if the note goes above or below the keyboard range, move it\r\nfunction sanitizeKeyLocation(noteNumber) {\r\n  if (noteNumber < 0) return noteNumber + 12\r\n\r\n  if (noteNumber > 24) return noteNumber - 12\r\n\r\n  return noteNumber\r\n}\r\n\r\n// provides a modifier for all transposed notes based on whether\r\n// the required transposition would produce any notes that either\r\n// go below or above the available keyboard range (24)\r\nfunction getRequiredOctaveModifier(\r\n  negativeTransposeModifier,\r\n  chordNoteNumbers\r\n) {\r\n  var tooLow\r\n  var tooHigh\r\n\r\n  for (var i = 0; i < chordNoteNumbers.length; i++) {\r\n    var noteNumber = chordNoteNumbers[i] - negativeTransposeModifier\r\n\r\n    if (noteNumber < 0) tooLow = true\r\n\r\n    if (noteNumber > 24) tooLow = true\r\n  }\r\n\r\n  if (tooLow && !tooHigh) return 12\r\n\r\n  if (tooHigh && !tooLow) return -12\r\n\r\n  // by default, handle this case by case\r\n  return 0\r\n}\r\n\r\nexport function getStepsChanged(chordPiano, newSelectedKey) {\r\n  var originalNoteLetter = chordPiano.selectedChord.noteLetter\r\n  var newNoteLetter = newSelectedKey.noteLetter\r\n\r\n  var originalNoteNumber = getNoteNumber(originalNoteLetter)\r\n  var newNoteNumber = getNoteNumber(newNoteLetter)\r\n\r\n  var stepsChanged = newNoteNumber - originalNoteNumber\r\n\r\n  return stepsChanged\r\n}\r\n\r\nexport function getAbsoluteStepsChanged(chordPiano, newSelectedKey) {\r\n  var relativeStepsChanged = getStepsChanged(chordPiano, newSelectedKey)\r\n  var octaveChange = newSelectedKey.octave - chordPiano.selectedChord.octave\r\n\r\n  return relativeStepsChanged + 12 * octaveChange\r\n}\r\n\r\nexport function getTransposedSelectedKey(chordPiano, stepsChanged) {\r\n  var selectedKey = {}\r\n\r\n  var originalNoteLetter = chordPiano.selectedChord.noteLetter\r\n  var originalOctave = chordPiano.selectedChord.octave ?? 0\r\n\r\n  var originalNoteNumber = getNoteNumber(originalNoteLetter)\r\n  var newNoteNumber = originalNoteNumber + stepsChanged\r\n\r\n  var newNote = normalizeNote(newNoteNumber, originalOctave)\r\n\r\n  // get note letter converted to sharp or flat depending on settings\r\n  var noteLetter = getNoteLetter(\"C\", newNote.noteNumber)\r\n\r\n  selectedKey.noteLetter = updateFlatOrSharpLetter(\r\n    chordPiano.showFlats,\r\n    noteLetter\r\n  )\r\n\r\n  selectedKey.octave = newNote.octave\r\n\r\n  return selectedKey\r\n}\r\n\r\nexport function getTransposedNote(originalNoteLetter, stepsChanged) {\r\n  if (originalNoteLetter === undefined || originalNoteLetter === \"\")\r\n    return originalNoteLetter\r\n\r\n  var originalNoteNumber = getNoteNumber(originalNoteLetter)\r\n\r\n  var newNoteNumber = originalNoteNumber + stepsChanged\r\n\r\n  if (newNoteNumber === 0) newNoteNumber = 12\r\n\r\n  return getNoteLetter(\"C\", newNoteNumber)\r\n}\r\n","import { getNoteNumberChord } from \"./chordManager\"\r\nimport { clearPianoSelections } from \"./pianoHelper\"\r\nimport { getNoteNumber, normalizeNote } from \"./noteManager\"\r\nimport { pianoGenerator } from \"./pianoHelper\"\r\nimport { getChordFromCode } from \"./chordCodeHandler\"\r\nimport {\r\n  getStepsChanged,\r\n  getAbsoluteStepsChanged,\r\n  getTransposedSelectedKey,\r\n  getTransposedNote\r\n} from \"./transposer\"\r\n\r\nexport function selectChordKeys(chordPiano) {\r\n  return selectChordKeysWithType(chordPiano, chordPiano.selectedChord, true)\r\n}\r\n\r\nexport function selectAutomatedChordKeys(chordPiano) {\r\n  return selectChordKeysWithType(chordPiano, chordPiano.selectedChord, false)\r\n}\r\n\r\nexport function selectChordKeysWithType(\r\n  chordPiano,\r\n  selectedChord,\r\n  userSelection\r\n) {\r\n  // don't select the same chord multiple times\r\n  if (chordIsAlreadySelected(chordPiano)) return\r\n\r\n  var chordNotes = getChordNotes(selectedChord, userSelection)\r\n\r\n  selectChordNotes(chordNotes, chordPiano)\r\n}\r\n\r\nfunction selectChordNotes(chordNotes, chordPiano) {\r\n  clearPianoSelections(chordPiano.piano)\r\n\r\n  chordNotes.notes.forEach((chordNoteNumber) => {\r\n    var note = normalizeNote(chordNoteNumber, chordNotes.octave)\r\n\r\n    selectNote(chordPiano, note.octave, note.noteNumber)\r\n  })\r\n\r\n  chordPiano.rendered = true\r\n}\r\n\r\nexport function getChordNotes(selectedChord, userSelection) {\r\n  var noteLetter = selectedChord.noteLetter\r\n  var type = selectedChord.type\r\n  var octave = selectedChord.octave\r\n  var slashNote = selectedChord.slashNote\r\n\r\n  // if not octave is provided, use the currently selected octave\r\n  if (!octave || octave === null) {\r\n    octave = 0\r\n  }\r\n\r\n  var chordRootNoteNumber = getNoteNumber(noteLetter)\r\n  var slashNoteNumber = getNoteNumber(slashNote)\r\n\r\n  var chordNoteNumbers = getNoteNumberChord(chordRootNoteNumber, type)\r\n\r\n  var chordNotes = getOctaveAdjustedChordNumbersWithFirstNote(\r\n    octave,\r\n    chordRootNoteNumber,\r\n    chordNoteNumbers,\r\n    slashNoteNumber,\r\n    userSelection\r\n  )\r\n  return chordNotes\r\n}\r\n\r\n/**\r\n * If there is a first note provided, this arranges the chordNoteNumbers such that\r\n * the firstNote comes first, while considering the octaves available for the\r\n * subsequent notes\r\n *\r\n * @param {*} octave\r\n * @param {*} chordNoteNumbers\r\n * @param {*} firstNote\r\n */\r\nfunction getOctaveAdjustedChordNumbersWithFirstNote(\r\n  octave,\r\n  chordRootNoteNumber,\r\n  chordNoteNumbers,\r\n  firstNote,\r\n  userSelection\r\n) {\r\n  var chordNotes = {\r\n    rooteNoteNumber: chordRootNoteNumber,\r\n    notes: [],\r\n    octave: octave,\r\n    // determine how many octaves we can increment berfor running off the keyboard\r\n    octaveAllowance: 2 - octave\r\n  }\r\n\r\n  if (!firstNote) {\r\n    // if we don't have a first note, just return what we have\r\n    chordNotes.notes = chordNoteNumbers\r\n  } else {\r\n    chordNotes = arrangeChordNotesFromFirstNote(\r\n      chordNotes,\r\n      chordNoteNumbers,\r\n      firstNote,\r\n      userSelection\r\n    )\r\n\r\n    // determine whether our base (requested octave)\r\n    // needs to be reduced\r\n    var octaveDecrement = getOctaveDecrementIfNeeded(chordNotes)\r\n\r\n    chordNotes.octave -= octaveDecrement\r\n  }\r\n\r\n  return chordNotes\r\n}\r\n\r\n/**\r\n * the following arranges the chord notes such that firstNote comes\r\n   first and the number of octaves required to captured the top notes\r\n   doesn't exceed the octave allowance\r\n * @param {*} chordNotes \r\n * @param {*} chordNoteNumbers \r\n * @param {*} firstNote \r\n * @param {*} octave \r\n * @returns \r\n */\r\nfunction arrangeChordNotesFromFirstNote(\r\n  chordNotes,\r\n  chordNoteNumbers,\r\n  firstNote,\r\n  userSelection\r\n) {\r\n  chordNoteNumbers = removeNoteFromArray(chordNoteNumbers, firstNote)\r\n\r\n  // start the new array with our first note\r\n  chordNotes.notes.push(firstNote)\r\n\r\n  var firstNoteIsLowest = chordNoteNumbers.every((n) => n > firstNote)\r\n\r\n  if (firstNoteIsLowest) {\r\n    // if the first note is already the lowest just add the chord notes on top\r\n    //chordNotes.notes = chordNotes.notes.concat(chordNoteNumbers)\r\n    chordNoteNumbers.forEach((note) => {\r\n      if (note - 12 > firstNote) {\r\n        note -= 12\r\n      }\r\n\r\n      chordNotes.notes.push(note)\r\n    })\r\n  } else {\r\n    // if the first note isn't the lowest, shift the rest of the chord notes up\r\n    // one octave\r\n    var shiftedUp = shiftChordNotesUpIfBelowFirstNote(\r\n      firstNote,\r\n      chordNoteNumbers,\r\n      chordNotes\r\n    )\r\n\r\n    // if we shifted notes up an octave to put the first note at the start\r\n    // try shifting everything down one octave\r\n    // this way slash chords will include the clicked on root even\r\n    // if it isn't the lowest note started at the clicked octave\r\n    if (shiftedUp && chordNotes.octave > 0 && userSelection) {\r\n      chordNotes.octave -= 1\r\n      chordNotes.octaveAllowance += 1\r\n    }\r\n  }\r\n  return chordNotes\r\n}\r\n\r\nfunction shiftChordNotesUpIfBelowFirstNote(\r\n  firstNote,\r\n  chordNoteNumbers,\r\n  chordNotes\r\n) {\r\n  var shiftedUp = false\r\n  chordNoteNumbers.forEach((note) => {\r\n    if (firstNote > note) {\r\n      if (chordNotes.rooteNoteNumber === note) shiftedUp = true\r\n\r\n      note += 12\r\n    }\r\n    chordNotes.notes.push(note)\r\n  })\r\n\r\n  //console.log(\"shifted\")\r\n  return shiftedUp\r\n}\r\n\r\n/**\r\n * Given the provided octaveAllowance, determine whether the base octave\r\n * needs to be reduced (without altering the note order) and if so\r\n * by how much (the octave decrement)\r\n *\r\n * @param {*} chordNotes      the note numbers for the chord\r\n * @param {*} octaveAllowance additional octaves that may be accessed\r\n *                            without running off keyboard\r\n */\r\nfunction getOctaveDecrementIfNeeded(chordNotes) {\r\n  var octaveDecrement = 0\r\n\r\n  chordNotes.notes.forEach((note) => {\r\n    var octaveIncrementRequired = Math.ceil(note / 12) - 1\r\n\r\n    if (octaveIncrementRequired >= chordNotes.octaveAllowance) {\r\n      var noteOctaveDecrement =\r\n        octaveIncrementRequired - chordNotes.octaveAllowance\r\n      if (noteOctaveDecrement > octaveDecrement)\r\n        octaveDecrement = noteOctaveDecrement\r\n    }\r\n  })\r\n\r\n  return octaveDecrement\r\n}\r\n\r\n/**\r\n * this removes any instances of the provided note in the array\r\n * whether in the first or any later octave (factors of 12)\r\n * @param {*} array\r\n * @param {*} note\r\n */\r\nfunction removeNoteFromArray(array, note) {\r\n  return array.filter((n) => !((n - note) % 12 === 0))\r\n}\r\n\r\n/**\r\n * Determines whether the currently selected chord matches the provided\r\n * type, letter, and octave\r\n */\r\nexport function chordIsAlreadySelected(chordPiano) {\r\n  return hasSelectedNotes(chordPiano.piano) && chordPiano.rendered === true\r\n}\r\n\r\nexport function selectNote(chordPiano, octave, noteNumber) {\r\n  var piano = chordPiano.piano\r\n\r\n  if (noteIsInvalid(piano, octave, noteNumber)) {\r\n    console.log(\"skipped invalid note: \" + octave + \" : \" + noteNumber)\r\n    return\r\n  }\r\n\r\n  var noteKey = piano[octave][noteNumber - 1]\r\n\r\n  if (!noteKey || noteKey.selected) {\r\n    console.log(\"SKIPPED INVALID NOTE: \" + octave + \" : \" + noteNumber)\r\n    return\r\n  }\r\n\r\n  noteKey.selected = true\r\n  noteKey.isStopping = null\r\n}\r\n\r\nexport function noteIsInvalid(pianoControl, octave, noteNumber) {\r\n  if (!pianoControl || !pianoControl[octave]) return true\r\n}\r\n\r\nexport function hasSelectedNotes(pianoControl) {\r\n  for (let i = 0; i < pianoControl.length; i++) {\r\n    var pianoOctave = pianoControl[i]\r\n\r\n    for (let j = 0; j < pianoOctave.length; j++) {\r\n      if (pianoOctave[j].selected) return true\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nexport function getLowestSelectedNote(pianoControl) {\r\n  for (let i = 0; i < pianoControl.length; i++) {\r\n    var pianoOctave = pianoControl[i]\r\n\r\n    for (let j = 0; j < pianoOctave.length; j++) {\r\n      if (pianoOctave[j].selected) {\r\n        return { octave: i, noteNumber: j }\r\n      }\r\n    }\r\n  }\r\n\r\n  return\r\n}\r\n\r\nexport function getLowestSelectedAbsoluteNote(pianoControl) {\r\n  var lowestNote = getLowestSelectedNote(pianoControl)\r\n  if (!lowestNote) return\r\n\r\n  return lowestNote.noteNumber + lowestNote.octave * 12\r\n}\r\n\r\nexport function createChordPiano(i, chordCode) {\r\n  var chord = getChordFromCode(chordCode)\r\n\r\n  if (chord !== undefined) {\r\n    return {\r\n      id: i,\r\n      piano: pianoGenerator(),\r\n      selectedKey: { noteLetter: chord.noteLetter, octave: chord.octave },\r\n      showFlats:\r\n        chord.noteLetter.includes(\"b\") ||\r\n        (chord.slashNote != null && chord.slashNote.includes(\"b\")),\r\n      isProgKey: chord.isKey,\r\n      selectedChord: {\r\n        noteLetter: chord.noteLetter,\r\n        type: chord.type,\r\n        octave: chord.octave,\r\n        slash: chord.slash,\r\n        slashNote: chord.slashNote\r\n      }\r\n    }\r\n  } else {\r\n    return\r\n    return {\r\n      id: i,\r\n      piano: pianoGenerator(),\r\n      selectedKey: { noteLetter: \"C\", octave: 0 },\r\n      isProgKey: false,\r\n      selectedChord: {\r\n        noteLetter: \"C\",\r\n        type: \"x\",\r\n        octave: 0,\r\n        invalidCode: chordCode,\r\n        slash: false\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function transposePianoBoard(\r\n  pianoId,\r\n  chordPianoSet,\r\n  originalChordPiano,\r\n  newSelectedKey\r\n) {\r\n  var stepsChanged = getStepsChanged(originalChordPiano, newSelectedKey)\r\n  var absoluteStepsChanged = getAbsoluteStepsChanged(\r\n    originalChordPiano,\r\n    newSelectedKey\r\n  )\r\n\r\n  //console.log(\"absolute change \" + absoluteStepsChanged)\r\n\r\n  if (absoluteStepsChanged !== 0) {\r\n    for (let i = 0; i < chordPianoSet.length; i++) {\r\n      var chordPiano = chordPianoSet[i]\r\n\r\n      var originalLowestAbsoluteNote = getLowestAbsoluteNoteFromSelectedChord(\r\n        chordPiano.selectedChord,\r\n        false\r\n      )\r\n\r\n      chordPiano.selectedChord.slashNote = getTransposedNote(\r\n        chordPiano.selectedChord.slashNote,\r\n        stepsChanged\r\n      )\r\n\r\n      // don't change the root chord\r\n      if (chordPiano.id === pianoId) {\r\n        continue\r\n      }\r\n\r\n      var newChordPianoSelectedKey = getTransposedSelectedKey(\r\n        chordPiano,\r\n        stepsChanged\r\n      )\r\n\r\n      setNewChordKey(chordPiano, newChordPianoSelectedKey)\r\n\r\n      var newLowestNote = getLowestAbsoluteNoteFromSelectedChord(\r\n        chordPiano.selectedChord,\r\n        true\r\n      )\r\n\r\n      chordPiano = moveChordTowardTonicIfNeeded(\r\n        newLowestNote,\r\n        originalLowestAbsoluteNote,\r\n        absoluteStepsChanged,\r\n        chordPiano\r\n      )\r\n\r\n      selectAutomatedChordKeys(chordPiano)\r\n    }\r\n  }\r\n}\r\nfunction setNewChordKey(chordPiano, newChordPianoSelectedKey) {\r\n  chordPiano.selectedKey = newChordPianoSelectedKey\r\n  chordPiano.selectedChord.noteLetter = newChordPianoSelectedKey.noteLetter\r\n  chordPiano.selectedChord.octave = newChordPianoSelectedKey.octave\r\n  chordPiano.rendered = false\r\n}\r\n\r\n/**\r\n * When transposing there are scenarios where the tonic might move 2 absolute\r\n * notes up, but a transposed chord would be shifted down 10 notes. The\r\n * following attempts to normalize the movement of the transposed to\r\n * match the tonic as much as possible\r\n *\r\n * @param {} newLowestNote\r\n * @param {*} originalLowestAbsoluteNote\r\n * @param {*} absoluteStepsChanged\r\n * @param {*} chordPiano\r\n * @returns\r\n */\r\nfunction moveChordTowardTonicIfNeeded(\r\n  newLowestNote,\r\n  originalLowestAbsoluteNote,\r\n  absoluteStepsChanged,\r\n  chordPiano\r\n) {\r\n  var newChordAbsoluteChange = newLowestNote - originalLowestAbsoluteNote\r\n  var keyChangeDiffSteps = newChordAbsoluteChange - absoluteStepsChanged\r\n\r\n  //console.log(\"changing \" + newChordAbsoluteChange + \" . \" + keyChangeDiffSteps)\r\n\r\n  // if the difference between the absolute note change in the tonic\r\n  // is greater than 6 notes, adjust the chord so that it is closer\r\n  // the the new absolute position of the tonic\r\n  if (Math.abs(keyChangeDiffSteps) > 6) {\r\n    // if we ascended an octave, descend if possible\r\n    if (keyChangeDiffSteps > 0) {\r\n      if (chordPiano.selectedKey.octave > 0) {\r\n        chordPiano.selectedKey.octave--\r\n        chordPiano.selectedChord.octave--\r\n        chordPiano.rendered = false\r\n      }\r\n    } else {\r\n      // ascend for descending chords if possible\r\n      if (chordPiano.selectedKey.octave < 2) {\r\n        //console.log(\"go up\")\r\n        chordPiano.selectedKey.octave++\r\n        chordPiano.selectedChord.octave++\r\n        chordPiano.rendered = false\r\n      }\r\n    }\r\n  }\r\n\r\n  return chordPiano\r\n}\r\n\r\nfunction getLowestAbsoluteNoteFromSelectedChord(selectedChord, transposing) {\r\n  var originalChordNotes = getChordNotes(selectedChord, !transposing)\r\n\r\n  //console.log(originalChordNotes)\r\n  return originalChordNotes.notes[0] + originalChordNotes.octave * 12\r\n}\r\n","import React, { useReducer, createContext, useEffect } from \"react\"\r\nimport PropTypes from \"prop-types\"\r\nimport { pianoGenerator } from \"../../utils/pianoHelper\"\r\nimport { getProgressionCode } from \"../../utils/chordCodeHandler\"\r\nimport {\r\n  createChordPiano,\r\n  transposePianoBoard,\r\n  selectChordKeys\r\n} from \"../../utils/chordPianoHandler\"\r\nimport { updateFlatOrSharpLetter } from \"../../utils/chordCodeHandler\"\r\n\r\nexport const STATE_NAME = \"PIANO_STATE\"\r\n\r\nconst initialState = {\r\n  history: null,\r\n  previousProgCodes: [],\r\n  currentProgCode: null,\r\n  building: false,\r\n  chordPianoSet: [getChordPiano(0)]\r\n}\r\n\r\n/***\r\n * Gets the next available sequential piano id from the current state\r\n */\r\nexport function getPianoById(state, pianoId) {\r\n  var chordPianoResults = state.chordPianoSet.filter(\r\n    (chordPiano) => chordPiano.id === pianoId\r\n  )\r\n\r\n  if (chordPianoResults.length > 0) return chordPianoResults[0]\r\n\r\n  return null\r\n}\r\n\r\nexport function clearProgKey(state) {\r\n  for (let i = 0; i < state.chordPianoSet.length; i++) {\r\n    var chordPiano = state.chordPianoSet[i]\r\n    chordPiano.isProgKey = false\r\n  }\r\n}\r\n\r\nexport function setProgKey(state, pianoId) {\r\n  clearProgKey(state)\r\n  var chordPiano = getPianoById(state, pianoId)\r\n  chordPiano.isProgKey = true\r\n}\r\n\r\nexport function buildProgFromCode(state, code) {\r\n  if (state.building) return\r\n\r\n  if (code.includes(\"%\")) {\r\n    code = decodeURIComponent(code)\r\n  }\r\n\r\n  var chordArray = code.split(\")\")\r\n\r\n  var chordPianoSet = []\r\n\r\n  state.building = true\r\n\r\n  var progKeySet = false\r\n\r\n  for (let i = 0; i < chordArray.length; i++) {\r\n    var chordCode = chordArray[i]\r\n\r\n    if (chordCode === \"\") continue\r\n\r\n    console.log(chordCode)\r\n\r\n    var chordPiano = createChordPiano(i, chordCode)\r\n\r\n    if (!chordPiano) continue\r\n\r\n    progKeySet = validateProgKey(chordPiano, progKeySet)\r\n\r\n    chordPianoSet.push(chordPiano)\r\n  }\r\n\r\n  state.chordPianoSet = chordPianoSet\r\n  state.building = false\r\n\r\n  updateUrlProgressionCode(state)\r\n\r\n  return state\r\n}\r\n\r\nfunction validateProgKey(chordPiano, progKeySet) {\r\n  // if the prog key is set here, only accept it\r\n  // if we haven't already set the progKey\r\n\r\n  if (chordPiano.isProgKey) {\r\n    if (progKeySet) chordPiano.isProgKey = false\r\n    else progKeySet = true\r\n  }\r\n  return progKeySet\r\n}\r\n\r\nexport function updateUrlProgressionCode(state) {\r\n  if (state.building) return\r\n\r\n  var progressionCode = getProgressionCode(state)\r\n  var progressionCodeUrl = \"?prog=\" + progressionCode\r\n\r\n  if (state.currentProgCode) state.previousProgCodes.push(state.currentProgCode)\r\n\r\n  state.currentProgCode = progressionCode\r\n\r\n  state.history.push({\r\n    search: progressionCodeUrl\r\n  })\r\n}\r\n\r\nfunction getChordPiano(pianoId) {\r\n  var chordPiano = {\r\n    id: pianoId,\r\n    piano: pianoGenerator(),\r\n    selectedKey: { noteLetter: \"C\", octave: 0 },\r\n    selectedChord: {\r\n      noteLetter: \"C\",\r\n      type: \"\",\r\n      octave: 1\r\n    }\r\n  }\r\n\r\n  return chordPiano\r\n}\r\n\r\nfunction getNextId(state) {\r\n  var nextId = Math.max(\r\n    ...state.chordPianoSet.map((chordPiano) => chordPiano.id)\r\n  )\r\n\r\n  if (nextId === null || nextId === -Infinity) return 0\r\n\r\n  return nextId + 1\r\n}\r\n\r\nconst persistedState = JSON.parse(sessionStorage.getItem(STATE_NAME))\r\n\r\nconst finalInitialState = { ...initialState, ...persistedState }\r\n\r\nconst appReducer = (state, action) => {\r\n  var pianoId = action.id\r\n\r\n  //console.log(action.type)\r\n  //console.log(\"piano id: \" + pianoId)\r\n\r\n  if (!pianoId) pianoId = 0\r\n\r\n  switch (action.type) {\r\n    case \"UPDATE_PIANO\":\r\n      //console.log(action.payload)\r\n\r\n      state.chordPianoSet = state.chordPianoSet.map((chordPiano) =>\r\n        chordPiano.id === pianoId\r\n          ? { ...chordPiano, piano: action.payload }\r\n          : chordPiano\r\n      )\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history,\r\n        building: state.building\r\n      }\r\n\r\n    case \"UPDATE_KEY\":\r\n      //console.log(action.payload)\r\n\r\n      var originalChordPiano = getPianoById(state, pianoId)\r\n\r\n      // adjust the note letter depending on whether we're showing sharps or flats\r\n      action.payload.noteLetter = updateFlatOrSharpLetter(\r\n        originalChordPiano.showFlats,\r\n        action.payload.noteLetter\r\n      )\r\n\r\n      if (originalChordPiano) {\r\n        if (originalChordPiano.isProgKey) {\r\n          var newSelectedKey = action.payload\r\n\r\n          //console.log(\"transposing for piano id: \" + pianoId)\r\n          transposePianoBoard(\r\n            pianoId,\r\n            state.chordPianoSet,\r\n            originalChordPiano,\r\n            newSelectedKey\r\n          )\r\n        }\r\n\r\n        originalChordPiano.selectedKey = action.payload\r\n        originalChordPiano.selectedChord.noteLetter = action.payload.noteLetter\r\n        originalChordPiano.selectedChord.octave = action.payload.octave\r\n\r\n        originalChordPiano.rendered = false\r\n\r\n        selectChordKeys(originalChordPiano)\r\n      } else {\r\n        console.log(\"Piano not found: \" + pianoId)\r\n      }\r\n\r\n      updateUrlProgressionCode(state)\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history\r\n      }\r\n\r\n    case \"UPDATE_CHORD_TYPE\":\r\n      //console.log(action.payload)\r\n\r\n      var originalChordPiano = getPianoById(state, pianoId)\r\n\r\n      if (originalChordPiano) {\r\n        originalChordPiano.selectedChord.type = action.chordType\r\n        originalChordPiano.rendered = false\r\n\r\n        selectChordKeys(originalChordPiano)\r\n      }\r\n\r\n      updateUrlProgressionCode(state)\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history\r\n      }\r\n\r\n    case \"UPDATE_SLASH_CHORD\":\r\n      //console.log(action)\r\n\r\n      var chordPiano = getPianoById(state, pianoId)\r\n\r\n      if (chordPiano) {\r\n        chordPiano.selectedChord.slash = action.isSlashChord\r\n        chordPiano.selectedChord.slashNote = action.slashNote\r\n      }\r\n\r\n      chordPiano.rendered = false\r\n\r\n      selectChordKeys(chordPiano)\r\n\r\n      updateUrlProgressionCode(state)\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history\r\n      }\r\n\r\n    case \"UPDATE_SHOW_FLATS\":\r\n      //console.log(action)\r\n\r\n      var chordPiano = getPianoById(state, pianoId)\r\n\r\n      if (chordPiano) {\r\n        chordPiano.showFlats = action.showFlats\r\n\r\n        chordPiano.selectedKey.noteLetter = updateFlatOrSharpLetter(\r\n          chordPiano.showFlats,\r\n          chordPiano.selectedKey.noteLetter\r\n        )\r\n\r\n        chordPiano.selectedChord.noteLetter = chordPiano.selectedKey.noteLetter\r\n      }\r\n\r\n      updateUrlProgressionCode(state)\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history\r\n      }\r\n\r\n    case \"ADD_CHORD_PIANO\":\r\n      if (action.payload !== null) {\r\n        action.payload = null\r\n        var nextChordpianoId = getNextId(state)\r\n\r\n        state.chordPianoSet = state.chordPianoSet.concat(\r\n          getChordPiano(nextChordpianoId)\r\n        )\r\n\r\n        updateUrlProgressionCode(state)\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history\r\n      }\r\n\r\n    case \"REMOVE_PIANO\":\r\n      state.chordPianoSet = state.chordPianoSet.filter(\r\n        (item) => item.id !== action.id\r\n      )\r\n\r\n      updateUrlProgressionCode(state)\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history\r\n      }\r\n\r\n    case \"SET_PROG_KEY\":\r\n      //console.log(action.payload)\r\n\r\n      if (action.keyChecked) {\r\n        setProgKey(state, action.id)\r\n      } else {\r\n        var chordPiano = getPianoById(state, action.id)\r\n        chordPiano.isProgKey = false\r\n      }\r\n\r\n      updateUrlProgressionCode(state)\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet\r\n      }\r\n\r\n    case \"BUILD_PROG_FROM_CODE\":\r\n      if (action.payload !== null) {\r\n        var code = action.payload\r\n\r\n        action.payload = null\r\n\r\n        buildProgFromCode(state, code)\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history,\r\n        building: state.building\r\n      }\r\n\r\n    case \"LOAD_PREVIOUS_PROG_CODE\":\r\n      if (state.previousProgCodes.length > 0) {\r\n        var lastProgIndex = state.previousProgCodes.length - 1\r\n        var previousProgCode = state.previousProgCodes[lastProgIndex]\r\n\r\n        state = buildProgFromCode(state, previousProgCode)\r\n\r\n        state.changed = lastProgIndex\r\n        state.previousProgCodes.splice(lastProgIndex, 2)\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history,\r\n        previousProgCodes: state.previousProgCodes,\r\n        currentProgCode: state.currentProgCode\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const AppContext = createContext()\r\n\r\nexport const AppProvider = (props) => {\r\n  const [state, dispatch] = useReducer(appReducer, finalInitialState)\r\n\r\n  useEffect(() => {\r\n    sessionStorage.setItem(STATE_NAME, JSON.stringify(state))\r\n  }, [state])\r\n\r\n  return (\r\n    <AppContext.Provider value={{ state, dispatch }}>\r\n      {props.children}\r\n    </AppContext.Provider>\r\n  )\r\n}\r\n\r\nAppProvider.propTypes = {\r\n  children: PropTypes.element\r\n}\r\n","import * as Tone from \"tone\"\r\nimport { getPianoById } from \"../components/context/AppContext\"\r\nimport { isMobile } from \"react-device-detect\"\r\n\r\nvar synth = null\r\n\r\nfunction getSynth() {\r\n  if (synth !== null) {\r\n    return synth\r\n  }\r\n  synth = new Tone.PolySynth().toDestination()\r\n  if (isMobile) synth.set({ latencyHint: \"balanced\" })\r\n  //synth.setContext(new Tone.Context({ latencyHint: \"playback\" }))\r\n  return synth\r\n}\r\n\r\nexport function playPiano(dispatch, state, pianoId) {\r\n  var pianoComponent = getPianoById(state, pianoId)\r\n\r\n  var synth = getSynth()\r\n\r\n  synth.toDestination()\r\n  var selectedNotes = getSelectedNotes(pianoComponent.piano)\r\n\r\n  if (!isMobile) {\r\n    dispatch({\r\n      type: \"UPDATE_PIANO\",\r\n      id: pianoComponent.id,\r\n      payload: pianoComponent.piano\r\n    })\r\n  }\r\n\r\n  synth.releaseAll()\r\n  //synth.set({ volume: 0.8 })\r\n\r\n  synth.triggerAttackRelease(\r\n    selectedNotes,\r\n    \"1.1\",\r\n    isMobile ? \"+0.15\" : \"+0.03\", // allow more latency on mobile\r\n    \"0.7\"\r\n  )\r\n\r\n  if (!isMobile) clearPianoKeyPlaying(dispatch, pianoComponent)\r\n}\r\n\r\nfunction getSelectedNotes(piano) {\r\n  var selectedNotes = []\r\n\r\n  for (let octaveIndex = 0; octaveIndex < piano.length; octaveIndex++) {\r\n    var pianoOctave = piano[octaveIndex]\r\n\r\n    for (let j = 0; j < pianoOctave.length; j++) {\r\n      var noteKey = pianoOctave[j]\r\n\r\n      if (noteKey.selected) {\r\n        var note = `${noteKey.note.toUpperCase()}${octaveIndex + 3}`\r\n        selectedNotes.push(note)\r\n\r\n        if (!isMobile) {\r\n          noteKey.isStopping = null\r\n          noteKey.isPlaying = true\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return selectedNotes\r\n}\r\n\r\nfunction clearPianoKeyPlaying(dispatch, pianoComponent) {\r\n  setTimeout(function () {\r\n    var piano = pianoComponent.piano\r\n    for (let i = 0; i < piano.length; i++) {\r\n      var pianoOctave = piano[i]\r\n\r\n      for (let z = 0; z < pianoOctave.length; z++) {\r\n        var key = pianoOctave[z]\r\n        if (key.isPlaying) {\r\n          key.isPlaying = false\r\n          key.isStopping = true\r\n        }\r\n      }\r\n    }\r\n\r\n    dispatch({\r\n      type: \"UPDATE_PIANO\",\r\n      id: pianoComponent.id,\r\n      payload: pianoComponent.piano\r\n    })\r\n  }, 1500)\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\"\r\nimport Navbar from \"react-bootstrap/Navbar\"\r\nimport Button from \"react-bootstrap/Button\"\r\nimport \"../../styles/Layout.css\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport { playPiano } from \"../../utils/synthPlayer\"\r\nimport { isSlashChord } from \"../../utils/chordCodeHandler\"\r\nimport { Link, scroller } from \"react-scroll\"\r\nimport { isMobile } from \"react-device-detect\"\r\n\r\nexport const HeaderComponent = () => {\r\n  const { state, dispatch } = useContext(AppContext)\r\n\r\n  const [newChordAdded, setNewChordAdded] = useState(false)\r\n\r\n  const offset = -130\r\n\r\n  const handleClickAddChord = () => {\r\n    dispatch({\r\n      type: \"ADD_CHORD_PIANO\",\r\n      payload: \"selectedKey\"\r\n    })\r\n    setNewChordAdded(true)\r\n  }\r\n\r\n  useEffect(() => {\r\n    //console.log(\"render\")\r\n\r\n    if (!state.chordPianoSet || state.chordPianoSet.length < 1) return\r\n\r\n    if (newChordAdded) {\r\n      //(state)\r\n      var targetKey =\r\n        \"piano-\" + state.chordPianoSet[state.chordPianoSet.length - 1].id\r\n\r\n      //console.log(targetKey)\r\n      //console.log(state.chordPianoSet)\r\n      scroller.scrollTo(targetKey, {\r\n        duration: 500,\r\n        smooth: true,\r\n        offset: offset,\r\n        spy: true,\r\n        hashSpy: true,\r\n        to: targetKey\r\n      })\r\n\r\n      setNewChordAdded(false)\r\n    }\r\n  }, [state.chordPianoSet])\r\n\r\n  const handleClickClear = () => {\r\n    dispatch({\r\n      type: \"BUILD_PROG_FROM_CODE\",\r\n      payload: \"\"\r\n    })\r\n  }\r\n\r\n  const handleUndoClick = () => {\r\n    dispatch({\r\n      type: \"LOAD_PREVIOUS_PROG_CODE\",\r\n      payload: \"\"\r\n    })\r\n  }\r\n\r\n  const handleItemClick = (id) => {\r\n    //console.log(\"clicked \" + id)\r\n\r\n    playPiano(dispatch, state, id)\r\n  }\r\n\r\n  const renderProgression = () => {\r\n    return state.chordPianoSet.map((piano, i) => {\r\n      return (\r\n        <>\r\n          <Link\r\n            className=\"chordListItem\"\r\n            to={\"piano-\" + piano.id}\r\n            spy={true}\r\n            offset={offset}\r\n            isDynamic={true}\r\n            duration={500}\r\n            smooth={true}\r\n            key={piano.id}\r\n            onClick={(id) => handleItemClick(piano.id)}\r\n          >\r\n            <div className=\"chordItem\">\r\n              &nbsp;{piano.selectedChord.noteLetter}\r\n              {piano.selectedChord.type}\r\n              {isSlashChord(piano.selectedChord)\r\n                ? \"/\" + piano.selectedChord.slashNote\r\n                : \"\"}\r\n            </div>\r\n          </Link>\r\n          &nbsp;{i !== state.chordPianoSet.length - 1 ? \"|\" : \"\"}\r\n        </>\r\n      )\r\n    })\r\n  }\r\n  return (\r\n    <>\r\n      <Navbar fixed=\"top\" className=\"flex-column mainHeader\">\r\n        <div className=\"headerContainer\">\r\n          <div className=\"buttonContainer row\">\r\n            <Button\r\n              variant=\"primary\"\r\n              size=\"sm\"\r\n              className=\"btn-main chord-btn \"\r\n              onClick={() => handleClickAddChord()}\r\n            >\r\n              Add\r\n            </Button>\r\n            <Button\r\n              variant=\"primary\"\r\n              size=\"sm\"\r\n              className=\"btn-main chord-btn\"\r\n              onClick={() => handleUndoClick()}\r\n            >\r\n              Undo\r\n            </Button>\r\n            <Button\r\n              variant=\"primary\"\r\n              size=\"sm\"\r\n              className=\"btn-main chord-btn\"\r\n              onClick={() => handleClickClear()}\r\n            >\r\n              Clear\r\n            </Button>\r\n          </div>\r\n          <ul className=\"progression row\" style={{ listStyle: \"none\" }}>\r\n            {renderProgression()}\r\n          </ul>\r\n        </div>\r\n      </Navbar>\r\n    </>\r\n  )\r\n}\r\n","import React from \"react\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nexport const Key = ({ pianoKey, handleClick }) => {\r\n  return (\r\n    <>\r\n      <li\r\n        key-selected={`${pianoKey.selected}`}\r\n        key-playing={`${pianoKey.isPlaying}`}\r\n        key-stopping={`${\r\n          pianoKey.isStopping !== null ? pianoKey.isStopping : null\r\n        }`}\r\n        className={`${pianoKey.color} ${pianoKey.note} ${pianoKey.note}-${pianoKey.octave}`}\r\n        onClick={() =>\r\n          handleClick(pianoKey.note, pianoKey.noteNumber, pianoKey.octave)\r\n        }\r\n      ></li>\r\n    </>\r\n  )\r\n}\r\n\r\nKey.propTypes = {\r\n  pianoKey: PropTypes.object.isRequired,\r\n  handleClick: PropTypes.func\r\n}\r\n","import React, { useContext } from \"react\"\r\nimport \"../styles/Piano.css\"\r\nimport { Key } from \"./Key\"\r\nimport { AppContext, getPianoById } from \"../components/context/AppContext\"\r\nimport { getNoteLetter } from \"../utils/noteManager\"\r\nimport { playPiano } from \"../utils/synthPlayer\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nexport const PianoComponent = ({ pianoComponentId }) => {\r\n  const { state, dispatch } = useContext(AppContext)\r\n  const pianoId = pianoComponentId\r\n\r\n  const handleClick = (note, noteNumber, octave) => {\r\n    const noteLetter = getNoteLetter(\"C\", noteNumber)\r\n    //console.log(`You've clicked note: ${pianoId} - ${octave} - ${noteLetter}`)\r\n\r\n    var selectedKey = {}\r\n    selectedKey.noteLetter = noteLetter\r\n    selectedKey.octave = octave\r\n    dispatch({\r\n      type: \"UPDATE_KEY\",\r\n      id: pianoId,\r\n      payload: selectedKey\r\n    })\r\n  }\r\n\r\n  const handleClickRemovePiano = () => {\r\n    dispatch({\r\n      type: \"REMOVE_PIANO\",\r\n      id: pianoId\r\n    })\r\n  }\r\n\r\n  const handlePlayClick = () => {\r\n    playPiano(dispatch, state, pianoId)\r\n  }\r\n\r\n  const renderPiano = () => {\r\n    let piano = getPianoById(state, pianoId).piano\r\n    //console.log(piano)\r\n    return piano.map((octave, i) => {\r\n      return octave.map((pianoKey) => {\r\n        pianoKey.octave = i\r\n        return (\r\n          <Key\r\n            key={`${pianoKey.note}-${i}`}\r\n            pianoKey={pianoKey}\r\n            handleClick={() =>\r\n              handleClick(pianoKey.note, pianoKey.noteNumber, pianoKey.octave)\r\n            }\r\n          />\r\n        )\r\n      })\r\n    })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"pianoContainer\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"piano-play-button\"\r\n          onClick={() => handlePlayClick()}\r\n        ></button>\r\n        <div className=\"pianoBox\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"close pianoCloseButton\"\r\n            aria-label=\"Close\"\r\n            onClick={() => handleClickRemovePiano()}\r\n          >\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n          <ul className=\"set\">{renderPiano()}</ul>\r\n        </div>\r\n        <div className=\"closeContainer\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"close pianoCloseButtonMobile\"\r\n            aria-label=\"Close\"\r\n            onClick={() => handleClickRemovePiano()}\r\n          >\r\n            <span className=\"mobileClosedBtnText\">&times;</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nPianoComponent.propTypes = {\r\n  pianoComponentId: PropTypes.number.isRequired\r\n}\r\n","import { React, useContext, useRef, useEffect } from \"react\"\r\nimport Form from \"react-bootstrap/Form\"\r\nimport {\r\n  noteLetterMapWithSharps,\r\n  noteLetterMapWithFlats\r\n} from \"../utils/noteManager\"\r\nimport { chordMap } from \"../utils/chordManager\"\r\nimport { selectChordKeys, hasSelectedNotes } from \"../utils/chordPianoHandler\"\r\nimport { AppContext, getPianoById } from \"../components/context/AppContext\"\r\nimport PropTypes from \"prop-types\"\r\nimport { updateFlatOrSharpLetter } from \"../utils/chordCodeHandler\"\r\n\r\nexport const ChordInput = ({ pianoComponentId }) => {\r\n  const { state, dispatch } = useContext(AppContext)\r\n  const chordRef = useRef({})\r\n\r\n  var chordPiano = getPianoById(state, pianoComponentId)\r\n\r\n  chordRef.current.showFlats =\r\n    chordPiano.showFlats ||\r\n    chordPiano.selectedKey.noteLetter.includes(\"b\") ||\r\n    (chordPiano.selectedChord.slashNote != null &&\r\n      chordPiano.selectedChord.slashNote.includes(\"b\"))\r\n\r\n  chordRef.current.isProgKey = chordPiano.isProgKey ?? false\r\n\r\n  // get the current selected key letter, adjusted by flats or sharps\r\n  chordRef.current.selectedChordKey = updateFlatOrSharpLetter(\r\n    chordRef.current.showFlats,\r\n    chordPiano.selectedKey.noteLetter ?? \"C\"\r\n  )\r\n\r\n  chordRef.current.type = chordPiano.selectedChord.type\r\n  chordRef.current.id = chordPiano.id\r\n  chordRef.current.slashChord = chordPiano.selectedChord.slash ?? false\r\n\r\n  //chordRef.current.slashNote = chordPiano.selectedChord.slashNote ?? \"\"\r\n  chordRef.current.slashNote = updateFlatOrSharpLetter(\r\n    chordRef.current.showFlats,\r\n    chordPiano.selectedChord.slashNote ?? \"\"\r\n  )\r\n\r\n  chordRef.current.noteArray = getNoteArray(chordRef.current.showFlats)\r\n\r\n  useEffect(() => {\r\n    // if no keys are selected, load the selected chord\r\n    if (!hasSelectedNotes(chordPiano.piano)) {\r\n      selectChordKeys(chordPiano)\r\n    }\r\n\r\n    if (!state.building) {\r\n      selectChordKeys(chordPiano)\r\n    }\r\n  })\r\n\r\n  // processes new key selections\r\n  const handleKeySelectChange = (e) => {\r\n    if (e.target.value === null) return\r\n\r\n    chordRef.current.noteArray = getNoteArray(chordRef.current.showFlats)\r\n\r\n    chordPiano.selectedKey.noteLetter = e.target.value\r\n\r\n    dispatch({\r\n      type: \"UPDATE_KEY\",\r\n      id: chordPiano.id,\r\n      payload: {\r\n        noteLetter: e.target.value,\r\n        octave: chordPiano.selectedKey.octave ?? 0\r\n      }\r\n    })\r\n  }\r\n\r\n  // processes new chord type selections\r\n  const handleTypeSelectChange = (e) => {\r\n    chordRef.current.type = e.target.value\r\n\r\n    //console.log(chordRef.current.type)\r\n\r\n    dispatch({\r\n      type: \"UPDATE_CHORD_TYPE\",\r\n      id: chordPiano.id,\r\n      chordType: chordRef.current.type\r\n    })\r\n  }\r\n\r\n  // set whether this chord has the progression key\r\n  const handleIsKeyChecked = (e) => {\r\n    dispatch({\r\n      type: \"SET_PROG_KEY\",\r\n      keyChecked: e.target.checked,\r\n      id: chordPiano.id\r\n    })\r\n  }\r\n\r\n  // set whether this chord has the progression key\r\n  const handleIsSlashChordChecked = (e) => {\r\n    chordRef.current.slashChord = e.target.checked\r\n    dispatch({\r\n      type: \"UPDATE_SLASH_CHORD\",\r\n      isSlashChord: chordRef.current.slashChord,\r\n      id: chordPiano.id\r\n    })\r\n  }\r\n\r\n  // set whether the key selector shows sharps or flats\r\n  const handleIsFlatKeyChecked = (e) => {\r\n    chordRef.current.showFlats = e.target.checked\r\n\r\n    dispatch({\r\n      type: \"UPDATE_SHOW_FLATS\",\r\n      showFlats: chordRef.current.showFlats,\r\n      id: chordPiano.id\r\n    })\r\n  }\r\n\r\n  // processes new key selections\r\n  const handleSlashChordNoteChange = (e) => {\r\n    if (e.target.value === null) return\r\n\r\n    chordRef.current.slashNote = e.target.value\r\n\r\n    dispatch({\r\n      type: \"UPDATE_SLASH_CHORD\",\r\n      isSlashChord: chordRef.current.slashChord,\r\n      slashNote: chordRef.current.slashNote,\r\n      id: chordPiano.id\r\n    })\r\n  }\r\n\r\n  var chordTypeArray = Object.keys(chordMap)\r\n\r\n  return (\r\n    <Form className=\"chordInputForm\">\r\n      <Form.Group controlId=\"chordSelection\">\r\n        <div className=\"chordInputSelection keySelection\">\r\n          <Form.Control\r\n            as=\"select\"\r\n            value={chordRef.current.selectedChordKey}\r\n            custom\r\n            className=\"selectorBox\"\r\n            onChange={(e) => handleKeySelectChange(e)}\r\n          >\r\n            {chordRef.current.noteArray.map((option, index) => {\r\n              return (\r\n                <option key={index} value={option}>\r\n                  {option}\r\n                </option>\r\n              )\r\n            })}\r\n          </Form.Control>\r\n        </div>\r\n        <div className=\"chordInputSelection typeSelection\">\r\n          <Form.Control\r\n            className=\"selectorBox\"\r\n            as=\"select\"\r\n            value={chordRef.current.type}\r\n            custom\r\n            onChange={(e) => handleTypeSelectChange(e)}\r\n          >\r\n            {chordTypeArray.map((option, index) => {\r\n              return (\r\n                <option key={index} value={option}>\r\n                  {option}\r\n                </option>\r\n              )\r\n            })}\r\n          </Form.Control>\r\n        </div>\r\n        <Form.Check\r\n          type=\"checkbox\"\r\n          key={Number(chordRef.current.id)}\r\n          label=\"key\"\r\n          checked={chordRef.current.isProgKey}\r\n          className=\"keyCheckBox chordCheckBox\"\r\n          onChange={(e) => handleIsKeyChecked(e)}\r\n        />\r\n        <Form.Check\r\n          type=\"checkbox\"\r\n          key={\"slash\" + chordRef.current.id}\r\n          label=\"slash\"\r\n          checked={chordRef.current.slashChord}\r\n          className=\"slashCheckBox chordCheckBox\"\r\n          onChange={(e) => handleIsSlashChordChecked(e)}\r\n        />\r\n        <Form.Check\r\n          type=\"checkbox\"\r\n          key={\"flat\" + chordRef.current.id}\r\n          label=\"b\"\r\n          checked={chordRef.current.showFlats}\r\n          className=\"flatCheckBox chordCheckBox\"\r\n          onChange={(e) => handleIsFlatKeyChecked(e)}\r\n        />\r\n        <div className=\"slashSelection\">\r\n          <div\r\n            className=\"slashSymbol\"\r\n            display-option={`${chordRef.current.slashChord}`}\r\n          >\r\n            {\"/\"}\r\n          </div>\r\n          <div\r\n            className=\"slashChordSelection\"\r\n            display-option={`${chordRef.current.slashChord}`}\r\n          >\r\n            <Form.Control\r\n              className=\"selectorBox slashSelectorBox\"\r\n              as=\"select\"\r\n              value={chordRef.current.slashNote}\r\n              custom\r\n              onChange={(e) => handleSlashChordNoteChange(e)}\r\n            >\r\n              {chordRef.current.noteArray.concat(\"\").map((option, index) => {\r\n                return (\r\n                  <option key={index} value={option}>\r\n                    {option}\r\n                  </option>\r\n                )\r\n              })}\r\n            </Form.Control>\r\n          </div>\r\n        </div>\r\n      </Form.Group>\r\n    </Form>\r\n  )\r\n}\r\n\r\nChordInput.propTypes = {\r\n  pianoComponentId: PropTypes.number.isRequired\r\n}\r\nfunction getNoteArray(showFlats) {\r\n  if (showFlats) {\r\n    return Object.values(noteLetterMapWithFlats)\r\n  } else {\r\n    return Object.values(noteLetterMapWithSharps)\r\n  }\r\n}\r\n","import React from \"react\"\r\nimport \"../styles/Piano.css\"\r\nimport { PianoComponent } from \"./PianoComponent\"\r\nimport { ChordInput } from \"./ChordInput\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nexport const ChordPianoComponent = ({ pianoComponentId }) => {\r\n  return (\r\n    <>\r\n      <div className=\"container chordPiano\" id={\"piano-\" + pianoComponentId}>\r\n        <div className=\"contentBox row\">\r\n          <div className=\"pianoChordBox\">\r\n            <ChordInput\r\n              key={`c-${pianoComponentId}`}\r\n              className=\"chordBox\"\r\n              pianoComponentId={pianoComponentId}\r\n            />\r\n            <PianoComponent\r\n              key={Number(pianoComponentId)}\r\n              className=\"pianoBox\"\r\n              pianoComponentId={Number(pianoComponentId)}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nChordPianoComponent.propTypes = {\r\n  pianoComponentId: PropTypes.number.isRequired\r\n}\r\n","import React, { useContext, useEffect } from \"react\"\r\nimport \"../styles/Piano.css\"\r\nimport { AppContext } from \"../components/context/AppContext\"\r\nimport { getProgressionCode } from \"../utils/chordCodeHandler\"\r\nimport { ChordPianoComponent } from \"../components/ChordPianoComponent\"\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nexport const PianoBoardComponent = () => {\r\n  const { state, dispatch } = useContext(AppContext)\r\n\r\n  const history = useHistory()\r\n  state.history = history\r\n\r\n  const [, updateState] = React.useState()\r\n  const forceUpdate = React.useCallback(() => updateState({}), [])\r\n\r\n  useEffect(() => {\r\n    //console.log(\"render\")\r\n    forceUpdate()\r\n  }, [state.chordPianoSet, forceUpdate])\r\n\r\n  buildChordsFromUrl(state, history, dispatch)\r\n\r\n  const renderChordPianoSet = () => {\r\n    return state.chordPianoSet.map((chordPiano) => (\r\n      <div key={chordPiano.id}>\r\n        <ChordPianoComponent\r\n          id={\"piano-\" + chordPiano.id}\r\n          key={\"piano-\" + chordPiano.id}\r\n          className=\"row chordPianoComponent\"\r\n          pianoComponentId={Number(chordPiano.id)}\r\n          history={history}\r\n        />\r\n        <div key={\"strip-\" + chordPiano.id} className=\"pianoStrip\" />\r\n      </div>\r\n    ))\r\n  }\r\n\r\n  return (\r\n    <div key=\"pianoBoard\" className=\"pianoBoard\">\r\n      {renderChordPianoSet()}\r\n      <div className=\"pianoBoardGutter\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction buildChordsFromUrl(state, history, dispatch) {\r\n  var currentCode = getProgressionCode(state)\r\n\r\n  var newParams = history.location.search.replace(\"?prog=\", \"\")\r\n  newParams += history.location.hash\r\n\r\n  if (!state.building && currentCode !== newParams) {\r\n    console.log(\"New chord code provided \" + currentCode + \" vs \" + newParams)\r\n\r\n    dispatch({\r\n      type: \"BUILD_PROG_FROM_CODE\",\r\n      payload: newParams\r\n    })\r\n  }\r\n}\r\n","import React from \"react\"\r\nimport Navbar from \"react-bootstrap/Navbar\"\r\nimport Modal from \"react-bootstrap/Modal\"\r\nimport \"../../styles/Layout.css\"\r\nimport GitHub120 from \"../../public/images/GitHub120.png\"\r\n\r\nexport const FooterComponent = () => {\r\n  const [modalShow, setModalShow] = React.useState(false)\r\n\r\n  function AboutModal(props) {\r\n    return (\r\n      <Modal\r\n        {...props}\r\n        size=\"l\"\r\n        className=\"aboutModal\"\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered\r\n      >\r\n        <Modal.Header className=\"modalHeader\" closeButton>\r\n          <div className=\"headerBackground\" />\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p className=\"aboutDescriptionText\">\r\n            Chord Buildr provides an easy way for musicians and music lovers to\r\n            create and share chord progressions.\r\n          </p>\r\n          <hr className=\"aboutLine\" />\r\n          <p>\r\n            <h6>\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                fill=\"currentColor\"\r\n                class=\"bi bi-music-note\"\r\n                viewBox=\"0 0 16 16\"\r\n              >\r\n                <path d=\"M9 13c0 1.105-1.12 2-2.5 2S4 14.105 4 13s1.12-2 2.5-2 2.5.895 2.5 2z\" />\r\n                <path fill-rule=\"evenodd\" d=\"M9 3v10H8V3h1z\" />\r\n                <path d=\"M8 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 13 2.22V4L8 5V2.82z\" />\r\n              </svg>{\" \"}\r\n              transpose\r\n            </h6>\r\n            <div className=\"aboutFeatureText\">\r\n              Mark a chord as the key and the rest of your progression will\r\n              transpose as you change its root note.{\" \"}\r\n            </div>\r\n            <br />\r\n            <h6>\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                fill=\"currentColor\"\r\n                class=\"bi bi-music-note-beamed\"\r\n                viewBox=\"0 0 16 16\"\r\n              >\r\n                <path d=\"M6 13c0 1.105-1.12 2-2.5 2S1 14.105 1 13c0-1.104 1.12-2 2.5-2s2.5.896 2.5 2zm9-2c0 1.105-1.12 2-2.5 2s-2.5-.895-2.5-2 1.12-2 2.5-2 2.5.895 2.5 2z\" />\r\n                <path fill-rule=\"evenodd\" d=\"M14 11V2h1v9h-1zM6 3v10H5V3h1z\" />\r\n                <path d=\"M5 2.905a1 1 0 0 1 .9-.995l8-.8a1 1 0 0 1 1.1.995V3L5 4V2.905z\" />\r\n              </svg>{\" \"}\r\n              share\r\n            </h6>\r\n            <div className=\"aboutFeatureText\">\r\n              To share a progression, simply copy the URL. No account needed!\r\n            </div>\r\n            <br />\r\n          </p>\r\n          {/* <hr className=\"aboutLine\"/> */}\r\n          <p className=\"creditsText\">\r\n            Chord Buildr is an{\" \"}\r\n            <a\r\n              className=\"modalText\"\r\n              href=\"https://github.com/jekrch/chord-buildr\"\r\n            >\r\n              open source\r\n            </a>{\" \"}\r\n            project <br /> by{\" \"}\r\n            <a className=\"modalText\" href=\"https://www.jacobkrch.com\">\r\n              Jacob Krch\r\n            </a>{\" \"}\r\n            and{\" \"}\r\n            <a\r\n              className=\"modalText\"\r\n              href=\"https://www.linkedin.com/in/teran-keith-210941107/\"\r\n            >\r\n              Teran Keith\r\n            </a>\r\n          </p>\r\n          <p className=\"copyrightText\">\r\n            &copy; 2020-\r\n            {new Date().getFullYear()} Jacob Krch All Rights Reserved\r\n          </p>\r\n        </Modal.Body>\r\n      </Modal>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Navbar className=\"footNav\" fixed=\"bottom\">\r\n        <Navbar.Brand href=\"https://github.com/jekrch/chord-buildr\">\r\n          <img className=\"gitSrc\" src={GitHub120} alt=\"github\" />\r\n        </Navbar.Brand>{\" \"}\r\n        <div className=\"footNavText\">v1.2</div>\r\n        <div className=\"footNavAbout\" onClick={() => setModalShow(true)}>\r\n          about\r\n        </div>\r\n        <AboutModal show={modalShow} onHide={() => setModalShow(false)} />\r\n        <h1 className=\"titleText\">chord buildr</h1>\r\n      </Navbar>\r\n    </>\r\n  )\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwQTM4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwQTI4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTMyOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjJBNDE0QUJDOTlBMTExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8kSqyAAADD5JREFUeNrsXQ2Q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\"","import \"./App.css\"\r\nimport React from \"react\"\r\nimport { Route, Switch } from \"react-router\"\r\nimport { BrowserRouter as Router } from \"react-router-dom\"\r\nimport { AppProvider } from \"./components/context/AppContext\"\r\nimport { HeaderComponent } from \"./components/Layout\"\r\nimport { PianoBoardComponent } from \"./components/PianoBoardComponent\"\r\nimport { FooterComponent } from \"./components/Layout/FooterComponent\"\r\n\r\nexport const App = () => {\r\n  return (\r\n    <div className=\"App\">\r\n      <AppProvider>\r\n        <HeaderComponent />\r\n        <div className=\" mainContainer\">\r\n          <Router>\r\n            <Switch>\r\n              <Route\r\n                exact\r\n                path={[\"/\", \"/chord-buildr/\"]}\r\n                component={PianoBoardComponent}\r\n              />\r\n            </Switch>\r\n          </Router>\r\n        </div>\r\n        <FooterComponent />\r\n      </AppProvider>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport \"bootstrap/dist/css/bootstrap.min.css\"\r\nimport \"./index.css\"\r\nimport App from \"./App\"\r\nimport reportWebVitals from \"./reportWebVitals\"\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n"],"sourceRoot":""}