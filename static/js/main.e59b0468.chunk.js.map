{"version":3,"sources":["utils/pianoHelper.js","utils/noteManager.js","utils/chordManager.js","utils/chordCodeHandler.js","utils/transposer.js","utils/chordPianoHandler.js","components/context/AppContext.js","utils/synthPlayer.js","components/Layout/HeaderComponent.js","components/Key.js","components/PianoComponent.js","components/ChordInput.js","components/ChordPianoComponent.js","components/PianoBoardComponent.js","components/Layout/FooterComponent.js","public/images/GitHub120.png","App.js","reportWebVitals.js","index.js"],"names":["pianoKeys","note","color","pianoGenerator","piano","i","pianoKeysOctave","z","length","newKey","key","selected","noteNumber","octave","push","noteLetterMapWithSharps","1","2","3","4","5","6","7","8","9","10","11","12","noteLetterMapWithFlats","noteNumberMap","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","formatNoteName","letter","charAt","toUpperCase","toLowerCase","getNoteNumber","getNoteLetter","number","noteIndex","normalizeNoteNumber","noteLetterMap","getNoteLetterMapByKey","normalizeNote","chordMap","m","m6","m7","m9","maj7","13","maj9","dim","dim7","sus4","sus2","aug","add9","add2","m7b5","mM7","m11","maj13","x","getChordFromCode","chordCode","type","chord","replace","includes","startIndex","indexOf","fbCode","substring","console","log","removeFbclid","split","isNaN","Number","extractOctave","isKey","indexOfType","slashNote","pop","slash","processSlashChord","noteLetter","ex","undefined","Object","values","getProgressionCode","state","code","chordPianoSet","chordPiano","selectedChord","isProgKey","isSlashChord","getStepsChanged","newSelectedKey","originalNoteLetter","newNoteLetter","originalNoteNumber","getTransposedSelectedKey","stepsChanged","selectedKey","originalOctave","newNote","getTransposedNote","newNoteNumber","selectChordKeys","selectChordKeysWithType","selectAutomatedChordKeys","userSelection","hasSelectedNotes","rendered","chordIsAlreadySelected","chordNotes","pianoOctave","clearPianoSelections","notes","forEach","chordNoteNumber","pianoControl","noteIsInvalid","noteKey","isStopping","selectNote","selectChordNotes","getChordNotes","chordRootNoteNumber","slashNoteNumber","chordNoteNumbers","firstNote","rooteNoteNumber","octaveAllowance","octaveDecrement","octaveIncrementRequired","Math","ceil","noteOctaveDecrement","getOctaveDecrementIfNeeded","array","filter","n","removeNoteFromArray","every","shiftedUp","shiftChordNotesUpIfBelowFirstNote","arrangeChordNotesFromFirstNote","getOctaveAdjustedChordNumbersWithFirstNote","rootNoteNumber","chordType","intervalList","getNoteNumberChord","j","createChordPiano","id","transposePianoBoard","pianoId","originalChordPiano","absoluteStepsChanged","getAbsoluteStepsChanged","originalLowestAbsoluteNote","getLowestAbsoluteNoteFromSelectedChord","setNewChordKey","moveChordTowardTonicIfNeeded","newChordPianoSelectedKey","newLowestNote","keyChangeDiffSteps","abs","transposing","originalChordNotes","STATE_NAME","initialState","history","previousProgCodes","currentProgCode","building","getChordPiano","getPianoById","chordPianoResults","buildProgFromCode","decodeURIComponent","chordArray","progKeySet","validateProgKey","updateUrlProgressionCode","progressionCode","progressionCodeUrl","search","persistedState","JSON","parse","sessionStorage","getItem","finalInitialState","appReducer","action","map","payload","nextChordpianoId","nextId","max","getNextId","concat","item","keyChecked","clearProgKey","setProgKey","lastProgIndex","changed","splice","AppContext","createContext","AppProvider","props","useReducer","dispatch","useEffect","setItem","stringify","Provider","value","children","synth","playPiano","pianoComponent","Tone","toDestination","isMobile","set","latencyHint","selectedNotes","octaveIndex","isPlaying","getSelectedNotes","releaseAll","triggerAttackRelease","setTimeout","clearPianoKeyPlaying","HeaderComponent","useContext","useState","newChordAdded","setNewChordAdded","targetKey","scroller","scrollTo","duration","smooth","offset","spy","hashSpy","to","Navbar","fixed","className","Button","variant","size","onClick","style","listStyle","isDynamic","handleItemClick","Key","pianoKey","handleClick","key-selected","key-playing","key-stopping","PianoComponent","pianoComponentId","handleClickRemovePiano","aria-label","aria-hidden","ChordInput","chordRef","useRef","current","selectedChordKey","slashChord","chordTypeArray","keys","noteArray","Form","Group","controlId","Control","as","custom","onChange","e","target","handleKeySelectChange","option","index","handleTypeSelectChange","Check","label","checked","handleIsKeyChecked","handleIsSlashChordChecked","display-option","handleSlashChordNoteChange","ChordPianoComponent","PianoBoardComponent","useHistory","React","updateState","forceUpdate","useCallback","currentCode","newParams","location","hash","buildChordsFromUrl","FooterComponent","modalShow","setModalShow","AboutModal","Modal","aria-labelledby","centered","Header","closeButton","Body","xmlns","width","height","fill","class","viewBox","d","fill-rule","href","Date","getFullYear","Brand","src","alt","show","onHide","App","exact","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e59b0468.chunk.js","sourcesContent":["const pianoKeys = [\r\n  {\r\n    note: \"C\",\r\n    color: \"white\"\r\n  },\r\n  {\r\n    note: \"C#\",\r\n    color: \"black\"\r\n  },\r\n  {\r\n    note: \"D\",\r\n    color: \"white\"\r\n  },\r\n  {\r\n    note: \"D#\",\r\n    color: \"black\"\r\n  },\r\n  {\r\n    note: \"E\",\r\n    color: \"white\"\r\n  },\r\n  {\r\n    note: \"F\",\r\n    color: \"white\"\r\n  },\r\n  {\r\n    note: \"F#\",\r\n    color: \"black\"\r\n  },\r\n  {\r\n    note: \"G\",\r\n    color: \"white\"\r\n  },\r\n  {\r\n    note: \"G#\",\r\n    color: \"black\"\r\n  },\r\n  {\r\n    note: \"A\",\r\n    color: \"white\"\r\n  },\r\n  {\r\n    note: \"A#\",\r\n    color: \"black\"\r\n  },\r\n  {\r\n    note: \"B\",\r\n    color: \"white\"\r\n  }\r\n]\r\n\r\nexport const pianoGenerator = () => {\r\n  let piano = []\r\n  let octaves = 3\r\n  for (let i = 0; i < octaves; i++) {\r\n    //i is each octave\r\n    var pianoKeysOctave = []\r\n\r\n    for (let z = 0; z < pianoKeys.length; z++) {\r\n      var newKey = {}\r\n      var key = pianoKeys[z]\r\n\r\n      newKey.note = key.note\r\n      newKey.color = key.color\r\n      newKey.selected = false\r\n      newKey.noteNumber = z + 1\r\n      newKey.octave = i\r\n      pianoKeysOctave.push(newKey)\r\n    }\r\n\r\n    piano.push(pianoKeysOctave)\r\n  }\r\n  return piano\r\n}\r\n\r\n// deselect all keys in the provided piano\r\nexport function clearPianoSelections(piano) {\r\n  for (let i = 0; i < piano.length; i++) {\r\n    var pianoOctave = piano[i]\r\n\r\n    for (let z = 0; z < pianoOctave.length; z++) {\r\n      var key = pianoOctave[z]\r\n      key.selected = false\r\n    }\r\n  }\r\n}\r\n","export const noteLetterMapWithSharps = {\r\n  1: \"C\",\r\n  2: \"C#\",\r\n  3: \"D\",\r\n  4: \"D#\",\r\n  5: \"E\",\r\n  6: \"F\",\r\n  7: \"F#\",\r\n  8: \"G\",\r\n  9: \"G#\",\r\n  10: \"A\",\r\n  11: \"A#\",\r\n  12: \"B\"\r\n}\r\n\r\nexport const isValidLetter = (letter) => {\r\n  return Object.values(noteLetterMapWithSharps).includes(letter)\r\n}\r\n\r\nexport const noteLetterMapWithFlats = {\r\n  1: \"C\",\r\n  2: \"Db\",\r\n  3: \"D\",\r\n  4: \"Eb\",\r\n  5: \"E\",\r\n  6: \"F\",\r\n  7: \"Gb\",\r\n  8: \"G\",\r\n  9: \"Ab\",\r\n  10: \"A\",\r\n  11: \"Bb\",\r\n  12: \"B\"\r\n}\r\n\r\n// includes both sharps and flats\r\nexport const noteNumberMap = {\r\n  C: 1,\r\n  \"C#\": 2,\r\n  Db: 2,\r\n  D: 3,\r\n  \"D#\": 4,\r\n  Eb: 4,\r\n  E: 5,\r\n  F: 6,\r\n  \"F#\": 7,\r\n  Gb: 7,\r\n  G: 8,\r\n  \"G#\": 9,\r\n  Ab: 9,\r\n  A: 10,\r\n  \"A#\": 11,\r\n  Bb: 11,\r\n  B: 12\r\n}\r\n\r\n// sharps - c / g / d / a / e / b / f# / c#\r\n// flats  - f / Bb / Eb / Ab / Db / Gb / Cb\r\n\r\nexport function getNoteLetterMapByKey(key) {\r\n  key = formatNoteName(key)\r\n\r\n  switch (key) {\r\n    case \"C\":\r\n    case \"C#\":\r\n    case \"D\":\r\n    case \"E\":\r\n    case \"F#\":\r\n    case \"G\":\r\n    case \"A\":\r\n    case \"B\":\r\n      return noteLetterMapWithSharps\r\n\r\n    case \"G#\":\r\n    case \"Ab\":\r\n    case \"A#\":\r\n    case \"Bb\":\r\n    case \"Cb\":\r\n    case \"Db\":\r\n    case \"D#\":\r\n    case \"Eb\":\r\n    case \"F\":\r\n    case \"Gb\":\r\n      return noteLetterMapWithFlats\r\n\r\n    default:\r\n      return noteLetterMapWithFlats\r\n  }\r\n}\r\n\r\n// converts note letter to the correct case\r\n// (e.g. aB -> Ab; c# -> C#)\r\nexport function formatNoteName(letter) {\r\n  return letter.charAt(0).toUpperCase() + letter.charAt(1).toLowerCase()\r\n}\r\n\r\n// Get the number corresponding to the provide note letter\r\nexport function getNoteNumber(letter) {\r\n  if (!letter) return\r\n\r\n  letter = formatNoteName(letter)\r\n\r\n  return noteNumberMap[letter]\r\n}\r\n\r\n// get the letter corresponding to the provided note number\r\nexport function getNoteLetter(key, number) {\r\n  var noteIndex = normalizeNoteNumber(number)\r\n\r\n  var noteLetterMap = getNoteLetterMapByKey(key)\r\n\r\n  var letter = noteLetterMap[noteIndex]\r\n\r\n  return formatNoteName(letter)\r\n}\r\n\r\nexport function normalizeNoteNumber(noteNumber) {\r\n  while (noteNumber > 12) {\r\n    noteNumber = noteNumber - 12\r\n  }\r\n\r\n  while (noteNumber < 1) {\r\n    noteNumber = noteNumber + 12\r\n  }\r\n\r\n  return noteNumber\r\n}\r\n\r\n/***\r\n * if the note is over 12, find the corresponding note in the next octave\r\n   or if we're at the highest octave, bring the note down 12\r\n */\r\nexport function normalizeNote(noteNumber, octave) {\r\n  while (noteNumber > 12) {\r\n    noteNumber = noteNumber - 12\r\n\r\n    if (octave < 2) {\r\n      octave++\r\n    }\r\n  }\r\n\r\n  while (noteNumber < 1) {\r\n    noteNumber = noteNumber + 12\r\n\r\n    if (octave !== 0) {\r\n      octave--\r\n    }\r\n  }\r\n\r\n  return { noteNumber, octave }\r\n}\r\n","import { getNoteLetter } from \"./noteManager\"\r\n\r\nexport const chordMap = {\r\n  \"\": [0, 4, 7],\r\n  m: [0, 3, 7],\r\n  m6: [0, 3, 7, 9],\r\n  m7: [0, 3, 7, 10],\r\n  m9: [0, 3, 7, 10, 14],\r\n  maj7: [0, 4, 7, 11],\r\n  6: [0, 4, 7, 9],\r\n  5: [0, 7],\r\n  7: [0, 4, 7, 10],\r\n  9: [0, 4, 7, 10, 14],\r\n  11: [0, 4, 7, 10, 14, 17],\r\n  13: [0, 4, 7, 10, 14, 17, 21],\r\n  \"6/9\": [0, 4, 7, 9, 14],\r\n  maj9: [0, 4, 7, 11, 14],\r\n  dim: [0, 3, 6],\r\n  dim7: [0, 3, 6, 9],\r\n  sus4: [0, 5, 7],\r\n  sus2: [0, 2, 7],\r\n  aug: [0, 4, 8],\r\n  add9: [0, 4, 7, 14],\r\n  add2: [0, 2, 4, 7],\r\n  m7b5: [0, 2, 6, 10],\r\n  mM7: [0, 3, 7, 11],\r\n  m11: [0, 3, 7, 10, 14, 17],\r\n  \"7sus4\": [0, 5, 7, 10],\r\n  \"7-9\": [0, 4, 7, 10, 13],\r\n  \"7#5\": [0, 4, 8, 10],\r\n  maj13: [0, 4, 7, 11, 14, 21],\r\n  \"+\": [0, 4, 8],\r\n  x: [0]\r\n}\r\n\r\nexport const isValidChordType = (type) => {\r\n  return chordMap[type] !== undefined\r\n}\r\n\r\n// returns the note numbers for the specified chord (1, 5, 8)\r\nexport function getNoteNumberChord(rootNoteNumber, chordType) {\r\n  var intervalList = chordMap[chordType]\r\n  var chordNoteNumbers = []\r\n\r\n  for (var i = 0; i < intervalList.length; i++) {\r\n    var noteNumber = rootNoteNumber + intervalList[i]\r\n    chordNoteNumbers.push(noteNumber)\r\n  }\r\n\r\n  return chordNoteNumbers\r\n}\r\n\r\n// returns the note letters for the specified chord (e.g. C, E, G)\r\nexport function getNoteLettersChord(key, rootNoteNumber, chordType) {\r\n  var intervalList = chordMap[chordType]\r\n  var chordNoteLetters = []\r\n\r\n  for (var i = 0; i < intervalList.length; i++) {\r\n    var noteNumber = rootNoteNumber + intervalList[i]\r\n    var noteLetter = getNoteLetter(key, noteNumber)\r\n\r\n    chordNoteLetters.push(noteLetter)\r\n  }\r\n\r\n  return chordNoteLetters\r\n}\r\n","import { isValidChordType } from \"./chordManager\"\r\nimport { isValidLetter } from \"./noteManager\"\r\n\r\n/***\r\n * get the octave from the start of the code\r\n */\r\nexport function extractOctave(chordCode, chord) {\r\n  var octave = chordCode.substring(0, 1)\r\n\r\n  if (!octave || isNaN(octave) || Number(octave) < 0) {\r\n    octave = 0\r\n  } else if (Number(octave) > 2) {\r\n    octave = 2\r\n  }\r\n\r\n  return octave\r\n}\r\n\r\nexport function getChordFromCode(chordCode) {\r\n  var chord = {}\r\n\r\n  try {\r\n    chordCode = chordCode.replace(\"(\", \"\")\r\n\r\n    // this might show up in the progression code due to facebook url processing\r\n    // it should be ignored\r\n    if (chordCode.includes(\"&amp\")) return\r\n\r\n    if (chordCode.includes(\"&fbclid\")) {\r\n      chordCode = removeFbclid(chordCode)\r\n    }\r\n\r\n    chordCode = chordCode.split(\"#piano-\")[0]\r\n\r\n    chord.octave = extractOctave(chordCode, chord)\r\n\r\n    chordCode = chordCode.replace(\")\", \"\")\r\n\r\n    chord.isKey = chordCode.includes(\"*\")\r\n    chordCode = chordCode.replace(\"*\", \"\")\r\n\r\n    chordCode = processSlashChord(chordCode, chord)\r\n\r\n    var indexOfType = chordCode.substring(2, 3) === \"#\" ? 3 : 2\r\n\r\n    chord.noteLetter = chordCode.substring(1, indexOfType).toUpperCase()\r\n    chord.type = chordCode.substring(indexOfType)\r\n\r\n    console.log(chord)\r\n  } catch (ex) {\r\n    console.log(\"Exception - invalid chord code: \" + chordCode)\r\n    return\r\n  }\r\n\r\n  if (!(isValidChordType(chord.type) && isValidLetter(chord.noteLetter))) {\r\n    console.log(\"Invalid chord code: \" + chordCode)\r\n    return\r\n  }\r\n\r\n  return chord\r\n}\r\n\r\n/***\r\n * if an fbclid was inserted into the code, remove it here\r\n */\r\nfunction removeFbclid(chordCode) {\r\n  var startIndex = chordCode.indexOf(\"&fbclid\")\r\n  var fbCode = chordCode.substring(startIndex, startIndex + 69)\r\n  chordCode = chordCode.replace(fbCode, \"\")\r\n  console.log(\"fbCode removed: \" + fbCode)\r\n  return chordCode\r\n}\r\n\r\nfunction processSlashChord(chordCode, chord) {\r\n  if (chordCode.includes(\":\")) {\r\n    var slashNote = chordCode.split(\":\").pop()\r\n\r\n    chord.slashNote = slashNote\r\n    chord.slash = true\r\n\r\n    chordCode = chordCode.replace(\":\" + slashNote, \"\")\r\n  }\r\n  return chordCode\r\n}\r\n\r\nexport function getProgressionCode(state) {\r\n  var code = \"\"\r\n\r\n  for (let i = 0; i < state.chordPianoSet.length; i++) {\r\n    var chordPiano = state.chordPianoSet[i]\r\n    var selectedChord = chordPiano.selectedChord\r\n\r\n    if (!selectedChord) continue\r\n\r\n    var chordCode =\r\n      selectedChord.octave + selectedChord.noteLetter + selectedChord.type\r\n\r\n    if (chordPiano.isProgKey) chordCode += \"*\"\r\n\r\n    if (isSlashChord(selectedChord)) {\r\n      chordCode += \":\" + selectedChord.slashNote\r\n    }\r\n\r\n    code += `(${chordCode})`\r\n  }\r\n\r\n  return code\r\n}\r\n\r\nexport function isSlashChord(selectedChord) {\r\n  return (\r\n    selectedChord.slash &&\r\n    selectedChord.slashNote &&\r\n    selectedChord.slashNote !== \"\"\r\n  )\r\n}\r\n","import { getNoteNumber, getNoteLetter, normalizeNote } from \"./noteManager\"\r\n\r\n// returns the note numbers for the specified chord with the indicated\r\n// transposition applied to each note\r\nexport function shiftChord(originalKeyNumber, newKeyNumber, chordNoteNumbers) {\r\n  var negativeTransposeModifier = originalKeyNumber - newKeyNumber\r\n\r\n  // determine whether the new chord needs to shift up or down\r\n  // and octave in order to stay within the keyboard range\r\n  var requiredOctaveModifier = getRequiredOctaveModifier(\r\n    negativeTransposeModifier,\r\n    chordNoteNumbers\r\n  )\r\n\r\n  var newChordNoteNumbers = []\r\n\r\n  for (var i = 0; i < chordNoteNumbers.length; i++) {\r\n    var noteNumber = chordNoteNumbers[i] - negativeTransposeModifier\r\n\r\n    // if the chord needed to be shifted up or down and octave\r\n    // apply that here\r\n    noteNumber = noteNumber + requiredOctaveModifier\r\n\r\n    // in the rare case that we're still outside the range\r\n    // address that here\r\n    noteNumber = sanitizeKeyLocation(noteNumber)\r\n\r\n    newChordNoteNumbers.push(noteNumber)\r\n  }\r\n\r\n  return newChordNoteNumbers\r\n}\r\n\r\n// if the note goes above or below the keyboard range, move it\r\nfunction sanitizeKeyLocation(noteNumber) {\r\n  if (noteNumber < 0) return noteNumber + 12\r\n\r\n  if (noteNumber > 24) return noteNumber - 12\r\n\r\n  return noteNumber\r\n}\r\n\r\n// provides a modifier for all transposed notes based on whether\r\n// the required transposition would produce any notes that either\r\n// go below or above the available keyboard range (24)\r\nfunction getRequiredOctaveModifier(\r\n  negativeTransposeModifier,\r\n  chordNoteNumbers\r\n) {\r\n  var tooLow\r\n  var tooHigh\r\n\r\n  for (var i = 0; i < chordNoteNumbers.length; i++) {\r\n    var noteNumber = chordNoteNumbers[i] - negativeTransposeModifier\r\n\r\n    if (noteNumber < 0) tooLow = true\r\n\r\n    if (noteNumber > 24) tooLow = true\r\n  }\r\n\r\n  if (tooLow && !tooHigh) return 12\r\n\r\n  if (tooHigh && !tooLow) return -12\r\n\r\n  // by default, handle this case by case\r\n  return 0\r\n}\r\n\r\nexport function getStepsChanged(chordPiano, newSelectedKey) {\r\n  var originalNoteLetter = chordPiano.selectedChord.noteLetter\r\n  var newNoteLetter = newSelectedKey.noteLetter\r\n\r\n  var originalNoteNumber = getNoteNumber(originalNoteLetter)\r\n  var newNoteNumber = getNoteNumber(newNoteLetter)\r\n\r\n  var stepsChanged = newNoteNumber - originalNoteNumber\r\n\r\n  return stepsChanged\r\n}\r\n\r\nexport function getAbsoluteStepsChanged(chordPiano, newSelectedKey) {\r\n  var relativeStepsChanged = getStepsChanged(chordPiano, newSelectedKey)\r\n  var octaveChange = newSelectedKey.octave - chordPiano.selectedChord.octave\r\n\r\n  return relativeStepsChanged + 12 * octaveChange\r\n}\r\n\r\nexport function getTransposedSelectedKey(chordPiano, stepsChanged) {\r\n  var selectedKey = {}\r\n\r\n  var originalNoteLetter = chordPiano.selectedChord.noteLetter\r\n  var originalOctave = chordPiano.selectedChord.octave ?? 0\r\n\r\n  var originalNoteNumber = getNoteNumber(originalNoteLetter)\r\n  var newNoteNumber = originalNoteNumber + stepsChanged\r\n\r\n  var newNote = normalizeNote(newNoteNumber, originalOctave)\r\n\r\n  selectedKey.noteLetter = getNoteLetter(\"C\", newNote.noteNumber)\r\n  selectedKey.octave = newNote.octave\r\n\r\n  return selectedKey\r\n}\r\n\r\nexport function getTransposedNote(originalNoteLetter, stepsChanged) {\r\n  if (originalNoteLetter === undefined || originalNoteLetter === \"\")\r\n    return originalNoteLetter\r\n\r\n  var originalNoteNumber = getNoteNumber(originalNoteLetter)\r\n\r\n  var newNoteNumber = originalNoteNumber + stepsChanged\r\n\r\n  if (newNoteNumber === 0) newNoteNumber = 12\r\n\r\n  return getNoteLetter(\"C\", newNoteNumber)\r\n}\r\n","import { getNoteNumberChord } from \"./chordManager\"\r\nimport { clearPianoSelections } from \"./pianoHelper\"\r\nimport { getNoteNumber, normalizeNote } from \"./noteManager\"\r\nimport { pianoGenerator } from \"./pianoHelper\"\r\nimport { getChordFromCode } from \"./chordCodeHandler\"\r\nimport {\r\n  getStepsChanged,\r\n  getAbsoluteStepsChanged,\r\n  getTransposedSelectedKey,\r\n  getTransposedNote\r\n} from \"./transposer\"\r\n\r\nexport function selectChordKeys(chordPiano) {\r\n  return selectChordKeysWithType(chordPiano, chordPiano.selectedChord, true)\r\n}\r\n\r\nexport function selectAutomatedChordKeys(chordPiano) {\r\n  return selectChordKeysWithType(chordPiano, chordPiano.selectedChord, false)\r\n}\r\n\r\nexport function selectChordKeysWithType(\r\n  chordPiano,\r\n  selectedChord,\r\n  userSelection\r\n) {\r\n  // don't select the same chord multiple times\r\n  if (chordIsAlreadySelected(chordPiano)) return\r\n\r\n  var chordNotes = getChordNotes(selectedChord, userSelection)\r\n\r\n  selectChordNotes(chordNotes, chordPiano)\r\n}\r\n\r\nfunction selectChordNotes(chordNotes, chordPiano) {\r\n  clearPianoSelections(chordPiano.piano)\r\n\r\n  chordNotes.notes.forEach((chordNoteNumber) => {\r\n    var note = normalizeNote(chordNoteNumber, chordNotes.octave)\r\n\r\n    selectNote(chordPiano, note.octave, note.noteNumber)\r\n  })\r\n\r\n  chordPiano.rendered = true\r\n}\r\n\r\nexport function getChordNotes(selectedChord, userSelection) {\r\n  var noteLetter = selectedChord.noteLetter\r\n  var type = selectedChord.type\r\n  var octave = selectedChord.octave\r\n  var slashNote = selectedChord.slashNote\r\n\r\n  // if not octave is provided, use the currently selected octave\r\n  if (!octave || octave === null) {\r\n    octave = 0\r\n  }\r\n\r\n  var chordRootNoteNumber = getNoteNumber(noteLetter)\r\n  var slashNoteNumber = getNoteNumber(slashNote)\r\n\r\n  var chordNoteNumbers = getNoteNumberChord(chordRootNoteNumber, type)\r\n\r\n  var chordNotes = getOctaveAdjustedChordNumbersWithFirstNote(\r\n    octave,\r\n    chordRootNoteNumber,\r\n    chordNoteNumbers,\r\n    slashNoteNumber,\r\n    userSelection\r\n  )\r\n  return chordNotes\r\n}\r\n\r\n/**\r\n * If there is a first note provided, this arranges the chordNoteNumbers such that\r\n * the firstNote comes first, while considering the octaves available for the\r\n * subsequent notes\r\n *\r\n * @param {*} octave\r\n * @param {*} chordNoteNumbers\r\n * @param {*} firstNote\r\n */\r\nfunction getOctaveAdjustedChordNumbersWithFirstNote(\r\n  octave,\r\n  chordRootNoteNumber,\r\n  chordNoteNumbers,\r\n  firstNote,\r\n  userSelection\r\n) {\r\n  var chordNotes = {\r\n    rooteNoteNumber: chordRootNoteNumber,\r\n    notes: [],\r\n    octave: octave,\r\n    // determine how many octaves we can increment berfor running off the keyboard\r\n    octaveAllowance: 2 - octave\r\n  }\r\n\r\n  if (!firstNote) {\r\n    // if we don't have a first note, just return what we have\r\n    chordNotes.notes = chordNoteNumbers\r\n  } else {\r\n    chordNotes = arrangeChordNotesFromFirstNote(\r\n      chordNotes,\r\n      chordNoteNumbers,\r\n      firstNote,\r\n      userSelection\r\n    )\r\n\r\n    // determine whether our base (requested octave)\r\n    // needs to be reduced\r\n    var octaveDecrement = getOctaveDecrementIfNeeded(chordNotes)\r\n\r\n    chordNotes.octave -= octaveDecrement\r\n  }\r\n\r\n  return chordNotes\r\n}\r\n\r\n/**\r\n * the following arranges the chord notes such that firstNote comes\r\n   first and the number of octaves required to captured the top notes\r\n   doesn't exceed the octave allowance\r\n * @param {*} chordNotes \r\n * @param {*} chordNoteNumbers \r\n * @param {*} firstNote \r\n * @param {*} octave \r\n * @returns \r\n */\r\nfunction arrangeChordNotesFromFirstNote(\r\n  chordNotes,\r\n  chordNoteNumbers,\r\n  firstNote,\r\n  userSelection\r\n) {\r\n  chordNoteNumbers = removeNoteFromArray(chordNoteNumbers, firstNote)\r\n\r\n  // start the new array with our first note\r\n  chordNotes.notes.push(firstNote)\r\n\r\n  var firstNoteIsLowest = chordNoteNumbers.every((n) => n > firstNote)\r\n\r\n  if (firstNoteIsLowest) {\r\n    // if the first note is already the lowest just add the chord notes on top\r\n    //chordNotes.notes = chordNotes.notes.concat(chordNoteNumbers)\r\n    chordNoteNumbers.forEach((note) => {\r\n      if (note - 12 > firstNote) {\r\n        note -= 12\r\n      }\r\n\r\n      chordNotes.notes.push(note)\r\n    })\r\n  } else {\r\n    // if the first note isn't the lowest, shift the rest of the chord notes up\r\n    // one octave\r\n    var shiftedUp = shiftChordNotesUpIfBelowFirstNote(\r\n      firstNote,\r\n      chordNoteNumbers,\r\n      chordNotes\r\n    )\r\n\r\n    // if we shifted notes up an octave to put the first note at the start\r\n    // try shifting everything down one octave\r\n    // this way slash chords will include the clicked on root even\r\n    // if it isn't the lowest note started at the clicked octave\r\n    if (shiftedUp && chordNotes.octave > 0 && userSelection) {\r\n      chordNotes.octave -= 1\r\n      chordNotes.octaveAllowance += 1\r\n    }\r\n  }\r\n  return chordNotes\r\n}\r\n\r\nfunction shiftChordNotesUpIfBelowFirstNote(\r\n  firstNote,\r\n  chordNoteNumbers,\r\n  chordNotes\r\n) {\r\n  var shiftedUp = false\r\n  chordNoteNumbers.forEach((note) => {\r\n    if (firstNote > note) {\r\n      if (chordNotes.rooteNoteNumber === note) shiftedUp = true\r\n\r\n      note += 12\r\n    }\r\n    chordNotes.notes.push(note)\r\n  })\r\n\r\n  //console.log(\"shifted\")\r\n  return shiftedUp\r\n}\r\n\r\n/**\r\n * Given the provided octaveAllowance, determine whether the base octave\r\n * needs to be reduced (without altering the note order) and if so\r\n * by how much (the octave decrement)\r\n *\r\n * @param {*} chordNotes      the note numbers for the chord\r\n * @param {*} octaveAllowance additional octaves that may be accessed\r\n *                            without running off keyboard\r\n */\r\nfunction getOctaveDecrementIfNeeded(chordNotes) {\r\n  var octaveDecrement = 0\r\n\r\n  chordNotes.notes.forEach((note) => {\r\n    var octaveIncrementRequired = Math.ceil(note / 12) - 1\r\n\r\n    if (octaveIncrementRequired >= chordNotes.octaveAllowance) {\r\n      var noteOctaveDecrement =\r\n        octaveIncrementRequired - chordNotes.octaveAllowance\r\n      if (noteOctaveDecrement > octaveDecrement)\r\n        octaveDecrement = noteOctaveDecrement\r\n    }\r\n  })\r\n\r\n  return octaveDecrement\r\n}\r\n\r\n/**\r\n * this removes any instances of the provided note in the array\r\n * whether in the first or any later octave (factors of 12)\r\n * @param {*} array\r\n * @param {*} note\r\n */\r\nfunction removeNoteFromArray(array, note) {\r\n  return array.filter((n) => !((n - note) % 12 === 0))\r\n}\r\n\r\n/**\r\n * Determines whether the currently selected chord matches the provided\r\n * type, letter, and octave\r\n */\r\nexport function chordIsAlreadySelected(chordPiano) {\r\n  return hasSelectedNotes(chordPiano.piano) && chordPiano.rendered === true\r\n}\r\n\r\nexport function selectNote(chordPiano, octave, noteNumber) {\r\n  var piano = chordPiano.piano\r\n\r\n  if (noteIsInvalid(piano, octave, noteNumber)) {\r\n    console.log(\"skipped invalid note: \" + octave + \" : \" + noteNumber)\r\n    return\r\n  }\r\n\r\n  var noteKey = piano[octave][noteNumber - 1]\r\n\r\n  if (!noteKey || noteKey.selected) {\r\n    console.log(\"SKIPPED INVALID NOTE: \" + octave + \" : \" + noteNumber)\r\n    return\r\n  }\r\n\r\n  noteKey.selected = true\r\n  noteKey.isStopping = null\r\n}\r\n\r\nexport function noteIsInvalid(pianoControl, octave, noteNumber) {\r\n  if (!pianoControl || !pianoControl[octave]) return true\r\n}\r\n\r\nexport function hasSelectedNotes(pianoControl) {\r\n  for (let i = 0; i < pianoControl.length; i++) {\r\n    var pianoOctave = pianoControl[i]\r\n\r\n    for (let j = 0; j < pianoOctave.length; j++) {\r\n      if (pianoOctave[j].selected) return true\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nexport function getLowestSelectedNote(pianoControl) {\r\n  for (let i = 0; i < pianoControl.length; i++) {\r\n    var pianoOctave = pianoControl[i]\r\n\r\n    for (let j = 0; j < pianoOctave.length; j++) {\r\n      if (pianoOctave[j].selected) {\r\n        return { octave: i, noteNumber: j }\r\n      }\r\n    }\r\n  }\r\n\r\n  return\r\n}\r\n\r\nexport function getLowestSelectedAbsoluteNote(pianoControl) {\r\n  var lowestNote = getLowestSelectedNote(pianoControl)\r\n  if (!lowestNote) return\r\n\r\n  return lowestNote.noteNumber + lowestNote.octave * 12\r\n}\r\n\r\nexport function createChordPiano(i, chordCode) {\r\n  var chord = getChordFromCode(chordCode)\r\n\r\n  if (chord !== undefined) {\r\n    return {\r\n      id: i,\r\n      piano: pianoGenerator(),\r\n      selectedKey: { noteLetter: chord.noteLetter, octave: chord.octave },\r\n      isProgKey: chord.isKey,\r\n      selectedChord: {\r\n        noteLetter: chord.noteLetter,\r\n        type: chord.type,\r\n        octave: chord.octave,\r\n        slash: chord.slash,\r\n        slashNote: chord.slashNote\r\n      }\r\n    }\r\n  } else {\r\n    return\r\n    return {\r\n      id: i,\r\n      piano: pianoGenerator(),\r\n      selectedKey: { noteLetter: \"C\", octave: 0 },\r\n      isProgKey: false,\r\n      selectedChord: {\r\n        noteLetter: \"C\",\r\n        type: \"x\",\r\n        octave: 0,\r\n        invalidCode: chordCode,\r\n        slash: false\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function transposePianoBoard(\r\n  pianoId,\r\n  chordPianoSet,\r\n  originalChordPiano,\r\n  newSelectedKey\r\n) {\r\n  var stepsChanged = getStepsChanged(originalChordPiano, newSelectedKey)\r\n  var absoluteStepsChanged = getAbsoluteStepsChanged(\r\n    originalChordPiano,\r\n    newSelectedKey\r\n  )\r\n\r\n  //console.log(\"absolute change \" + absoluteStepsChanged)\r\n\r\n  if (absoluteStepsChanged !== 0) {\r\n    for (let i = 0; i < chordPianoSet.length; i++) {\r\n      var chordPiano = chordPianoSet[i]\r\n\r\n      var originalLowestAbsoluteNote = getLowestAbsoluteNoteFromSelectedChord(\r\n        chordPiano.selectedChord,\r\n        false\r\n      )\r\n\r\n      chordPiano.selectedChord.slashNote = getTransposedNote(\r\n        chordPiano.selectedChord.slashNote,\r\n        stepsChanged\r\n      )\r\n\r\n      // don't change the root chord\r\n      if (chordPiano.id === pianoId) {\r\n        continue\r\n      }\r\n\r\n      var newChordPianoSelectedKey = getTransposedSelectedKey(\r\n        chordPiano,\r\n        stepsChanged\r\n      )\r\n\r\n      setNewChordKey(chordPiano, newChordPianoSelectedKey)\r\n\r\n      var newLowestNote = getLowestAbsoluteNoteFromSelectedChord(\r\n        chordPiano.selectedChord,\r\n        true\r\n      )\r\n\r\n      chordPiano = moveChordTowardTonicIfNeeded(\r\n        newLowestNote,\r\n        originalLowestAbsoluteNote,\r\n        absoluteStepsChanged,\r\n        chordPiano\r\n      )\r\n\r\n      selectAutomatedChordKeys(chordPiano)\r\n    }\r\n  }\r\n}\r\nfunction setNewChordKey(chordPiano, newChordPianoSelectedKey) {\r\n  chordPiano.selectedKey = newChordPianoSelectedKey\r\n  chordPiano.selectedChord.noteLetter = newChordPianoSelectedKey.noteLetter\r\n  chordPiano.selectedChord.octave = newChordPianoSelectedKey.octave\r\n  chordPiano.rendered = false\r\n}\r\n\r\n/**\r\n * When transposing there are scenarios where the tonic might move 2 absolute\r\n * notes up, but a transposed chord would be shifted down 10 notes. The\r\n * following attempts to normalize the movement of the transposed to\r\n * match the tonic as much as possible\r\n *\r\n * @param {} newLowestNote\r\n * @param {*} originalLowestAbsoluteNote\r\n * @param {*} absoluteStepsChanged\r\n * @param {*} chordPiano\r\n * @returns\r\n */\r\nfunction moveChordTowardTonicIfNeeded(\r\n  newLowestNote,\r\n  originalLowestAbsoluteNote,\r\n  absoluteStepsChanged,\r\n  chordPiano\r\n) {\r\n  var newChordAbsoluteChange = newLowestNote - originalLowestAbsoluteNote\r\n  var keyChangeDiffSteps = newChordAbsoluteChange - absoluteStepsChanged\r\n\r\n  //console.log(\"changing \" + newChordAbsoluteChange + \" . \" + keyChangeDiffSteps)\r\n\r\n  // if the difference between the absolute note change in the tonic\r\n  // is greater than 6 notes, adjust the chord so that it is closer\r\n  // the the new absolute position of the tonic\r\n  if (Math.abs(keyChangeDiffSteps) > 6) {\r\n    // if we ascended an octave, descend if possible\r\n    if (keyChangeDiffSteps > 0) {\r\n      if (chordPiano.selectedKey.octave > 0) {\r\n        chordPiano.selectedKey.octave--\r\n        chordPiano.selectedChord.octave--\r\n        chordPiano.rendered = false\r\n      }\r\n    } else {\r\n      // ascend for descending chords if possible\r\n      if (chordPiano.selectedKey.octave < 2) {\r\n        //console.log(\"go up\")\r\n        chordPiano.selectedKey.octave++\r\n        chordPiano.selectedChord.octave++\r\n        chordPiano.rendered = false\r\n      }\r\n    }\r\n  }\r\n\r\n  return chordPiano\r\n}\r\n\r\nfunction getLowestAbsoluteNoteFromSelectedChord(selectedChord, transposing) {\r\n  var originalChordNotes = getChordNotes(selectedChord, !transposing)\r\n\r\n  //console.log(originalChordNotes)\r\n  return originalChordNotes.notes[0] + originalChordNotes.octave * 12\r\n}\r\n","import React, { useReducer, createContext, useEffect } from \"react\"\r\nimport PropTypes from \"prop-types\"\r\nimport { pianoGenerator } from \"../../utils/pianoHelper\"\r\nimport { getProgressionCode } from \"../../utils/chordCodeHandler\"\r\nimport {\r\n  createChordPiano,\r\n  transposePianoBoard,\r\n  selectChordKeys\r\n} from \"../../utils/chordPianoHandler\"\r\n\r\nexport const STATE_NAME = \"PIANO_STATE\"\r\n\r\nconst initialState = {\r\n  history: null,\r\n  previousProgCodes: [],\r\n  currentProgCode: null,\r\n  building: false,\r\n  chordPianoSet: [getChordPiano(0)]\r\n}\r\n\r\n/***\r\n * Gets the next available sequential piano id from the current state\r\n */\r\nexport function getPianoById(state, pianoId) {\r\n  var chordPianoResults = state.chordPianoSet.filter(\r\n    (chordPiano) => chordPiano.id === pianoId\r\n  )\r\n\r\n  if (chordPianoResults.length > 0) return chordPianoResults[0]\r\n\r\n  return null\r\n}\r\n\r\nexport function clearProgKey(state) {\r\n  for (let i = 0; i < state.chordPianoSet.length; i++) {\r\n    var chordPiano = state.chordPianoSet[i]\r\n    chordPiano.isProgKey = false\r\n  }\r\n}\r\n\r\nexport function setProgKey(state, pianoId) {\r\n  clearProgKey(state)\r\n  var chordPiano = getPianoById(state, pianoId)\r\n  chordPiano.isProgKey = true\r\n}\r\n\r\nexport function buildProgFromCode(state, code) {\r\n  if (state.building) return\r\n\r\n  if (code.includes(\"%\")) {\r\n    code = decodeURIComponent(code)\r\n  }\r\n\r\n  var chordArray = code.split(\")\")\r\n\r\n  var chordPianoSet = []\r\n\r\n  state.building = true\r\n\r\n  var progKeySet = false\r\n\r\n  for (let i = 0; i < chordArray.length; i++) {\r\n    var chordCode = chordArray[i]\r\n\r\n    if (chordCode === \"\") continue\r\n\r\n    console.log(chordCode)\r\n\r\n    var chordPiano = createChordPiano(i, chordCode)\r\n\r\n    if (!chordPiano) continue\r\n\r\n    progKeySet = validateProgKey(chordPiano, progKeySet)\r\n\r\n    chordPianoSet.push(chordPiano)\r\n  }\r\n\r\n  state.chordPianoSet = chordPianoSet\r\n  state.building = false\r\n\r\n  updateUrlProgressionCode(state)\r\n\r\n  return state\r\n}\r\n\r\nfunction validateProgKey(chordPiano, progKeySet) {\r\n  // if the prog key is set here, only accept it\r\n  // if we haven't already set the progKey\r\n\r\n  if (chordPiano.isProgKey) {\r\n    if (progKeySet) chordPiano.isProgKey = false\r\n    else progKeySet = true\r\n  }\r\n  return progKeySet\r\n}\r\n\r\nexport function updateUrlProgressionCode(state) {\r\n  if (state.building) return\r\n\r\n  var progressionCode = getProgressionCode(state)\r\n  var progressionCodeUrl = \"?prog=\" + progressionCode\r\n\r\n  if (state.currentProgCode) state.previousProgCodes.push(state.currentProgCode)\r\n\r\n  state.currentProgCode = progressionCode\r\n\r\n  state.history.push({\r\n    search: progressionCodeUrl\r\n  })\r\n}\r\n\r\nfunction getChordPiano(pianoId) {\r\n  var chordPiano = {\r\n    id: pianoId,\r\n    piano: pianoGenerator(),\r\n    selectedKey: { noteLetter: \"C\", octave: 0 },\r\n    selectedChord: {\r\n      noteLetter: \"C\",\r\n      type: \"\",\r\n      octave: 1\r\n    }\r\n  }\r\n\r\n  return chordPiano\r\n}\r\n\r\nfunction getNextId(state) {\r\n  var nextId = Math.max(\r\n    ...state.chordPianoSet.map((chordPiano) => chordPiano.id)\r\n  )\r\n\r\n  if (nextId === null || nextId === -Infinity) return 0\r\n\r\n  return nextId + 1\r\n}\r\n\r\nconst persistedState = JSON.parse(sessionStorage.getItem(STATE_NAME))\r\n\r\nconst finalInitialState = { ...initialState, ...persistedState }\r\n\r\nconst appReducer = (state, action) => {\r\n  var pianoId = action.id\r\n\r\n  //console.log(action.type)\r\n  //console.log(\"piano id: \" + pianoId)\r\n\r\n  if (!pianoId) pianoId = 0\r\n\r\n  switch (action.type) {\r\n    case \"UPDATE_PIANO\":\r\n      //console.log(action.payload)\r\n\r\n      state.chordPianoSet = state.chordPianoSet.map((chordPiano) =>\r\n        chordPiano.id === pianoId\r\n          ? { ...chordPiano, piano: action.payload }\r\n          : chordPiano\r\n      )\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history,\r\n        building: state.building\r\n      }\r\n\r\n    case \"UPDATE_KEY\":\r\n      //console.log(action.payload)\r\n\r\n      var originalChordPiano = getPianoById(state, pianoId)\r\n\r\n      if (originalChordPiano) {\r\n        if (originalChordPiano.isProgKey) {\r\n          var newSelectedKey = action.payload\r\n\r\n          //console.log(\"transposing for piano id: \" + pianoId)\r\n          transposePianoBoard(\r\n            pianoId,\r\n            state.chordPianoSet,\r\n            originalChordPiano,\r\n            newSelectedKey\r\n          )\r\n        }\r\n\r\n        originalChordPiano.selectedKey = action.payload\r\n        originalChordPiano.selectedChord.noteLetter = action.payload.noteLetter\r\n        originalChordPiano.selectedChord.octave = action.payload.octave\r\n\r\n        originalChordPiano.rendered = false\r\n\r\n        selectChordKeys(originalChordPiano)\r\n      } else {\r\n        console.log(\"Piano not found: \" + pianoId)\r\n      }\r\n\r\n      updateUrlProgressionCode(state)\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history\r\n      }\r\n\r\n    case \"UPDATE_CHORD_TYPE\":\r\n      //console.log(action.payload)\r\n\r\n      var originalChordPiano = getPianoById(state, pianoId)\r\n\r\n      if (originalChordPiano) {\r\n        originalChordPiano.selectedChord.type = action.chordType\r\n        originalChordPiano.rendered = false\r\n\r\n        selectChordKeys(originalChordPiano)\r\n      }\r\n\r\n      updateUrlProgressionCode(state)\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history\r\n      }\r\n\r\n    case \"UPDATE_SLASH_CHORD\":\r\n      //console.log(action)\r\n\r\n      var chordPiano = getPianoById(state, pianoId)\r\n\r\n      if (chordPiano) {\r\n        chordPiano.selectedChord.slash = action.isSlashChord\r\n        chordPiano.selectedChord.slashNote = action.slashNote\r\n      }\r\n\r\n      chordPiano.rendered = false\r\n\r\n      selectChordKeys(chordPiano)\r\n\r\n      updateUrlProgressionCode(state)\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history\r\n      }\r\n\r\n    case \"ADD_CHORD_PIANO\":\r\n      if (action.payload !== null) {\r\n        action.payload = null\r\n        var nextChordpianoId = getNextId(state)\r\n\r\n        state.chordPianoSet = state.chordPianoSet.concat(\r\n          getChordPiano(nextChordpianoId)\r\n        )\r\n\r\n        updateUrlProgressionCode(state)\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history\r\n      }\r\n\r\n    case \"REMOVE_PIANO\":\r\n      state.chordPianoSet = state.chordPianoSet.filter(\r\n        (item) => item.id !== action.id\r\n      )\r\n\r\n      updateUrlProgressionCode(state)\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history\r\n      }\r\n\r\n    case \"SET_PROG_KEY\":\r\n      //console.log(action.payload)\r\n\r\n      if (action.keyChecked) {\r\n        setProgKey(state, action.id)\r\n      } else {\r\n        var chordPiano = getPianoById(state, action.id)\r\n        chordPiano.isProgKey = false\r\n      }\r\n\r\n      updateUrlProgressionCode(state)\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet\r\n      }\r\n\r\n    case \"BUILD_PROG_FROM_CODE\":\r\n      if (action.payload !== null) {\r\n        var code = action.payload\r\n\r\n        action.payload = null\r\n\r\n        buildProgFromCode(state, code)\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history,\r\n        building: state.building\r\n      }\r\n\r\n    case \"LOAD_PREVIOUS_PROG_CODE\":\r\n      if (state.previousProgCodes.length > 0) {\r\n        var lastProgIndex = state.previousProgCodes.length - 1\r\n        var previousProgCode = state.previousProgCodes[lastProgIndex]\r\n\r\n        state = buildProgFromCode(state, previousProgCode)\r\n\r\n        state.changed = lastProgIndex\r\n        state.previousProgCodes.splice(lastProgIndex, 2)\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        chordPianoSet: state.chordPianoSet,\r\n        history: state.history,\r\n        previousProgCodes: state.previousProgCodes,\r\n        currentProgCode: state.currentProgCode\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const AppContext = createContext()\r\n\r\nexport const AppProvider = (props) => {\r\n  const [state, dispatch] = useReducer(appReducer, finalInitialState)\r\n\r\n  useEffect(() => {\r\n    sessionStorage.setItem(STATE_NAME, JSON.stringify(state))\r\n  }, [state])\r\n\r\n  return (\r\n    <AppContext.Provider value={{ state, dispatch }}>\r\n      {props.children}\r\n    </AppContext.Provider>\r\n  )\r\n}\r\n\r\nAppProvider.propTypes = {\r\n  children: PropTypes.element\r\n}\r\n","import * as Tone from \"tone\"\r\nimport { getPianoById } from \"../components/context/AppContext\"\r\nimport { isMobile } from \"react-device-detect\"\r\n\r\nvar synth = null\r\n\r\nfunction getSynth() {\r\n  if (synth !== null) {\r\n    return synth\r\n  }\r\n  synth = new Tone.PolySynth().toDestination()\r\n  if (isMobile) synth.set({ latencyHint: \"balanced\" })\r\n  //synth.setContext(new Tone.Context({ latencyHint: \"playback\" }))\r\n  return synth\r\n}\r\n\r\nexport function playPiano(dispatch, state, pianoId) {\r\n  var pianoComponent = getPianoById(state, pianoId)\r\n\r\n  var synth = getSynth()\r\n\r\n  synth.toDestination()\r\n  var selectedNotes = getSelectedNotes(pianoComponent.piano)\r\n\r\n  if (!isMobile) {\r\n    dispatch({\r\n      type: \"UPDATE_PIANO\",\r\n      id: pianoComponent.id,\r\n      payload: pianoComponent.piano\r\n    })\r\n  }\r\n\r\n  synth.releaseAll()\r\n  //synth.set({ volume: 0.8 })\r\n\r\n  synth.triggerAttackRelease(\r\n    selectedNotes,\r\n    \"1.1\",\r\n    isMobile ? \"+0.15\" : \"+0.03\", // allow more latency on mobile\r\n    \"0.7\"\r\n  )\r\n\r\n  if (!isMobile) clearPianoKeyPlaying(dispatch, pianoComponent)\r\n}\r\n\r\nfunction getSelectedNotes(piano) {\r\n  var selectedNotes = []\r\n\r\n  for (let octaveIndex = 0; octaveIndex < piano.length; octaveIndex++) {\r\n    var pianoOctave = piano[octaveIndex]\r\n\r\n    for (let j = 0; j < pianoOctave.length; j++) {\r\n      var noteKey = pianoOctave[j]\r\n\r\n      if (noteKey.selected) {\r\n        var note = `${noteKey.note.toUpperCase()}${octaveIndex + 3}`\r\n        selectedNotes.push(note)\r\n\r\n        if (!isMobile) {\r\n          noteKey.isStopping = null\r\n          noteKey.isPlaying = true\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return selectedNotes\r\n}\r\n\r\nfunction clearPianoKeyPlaying(dispatch, pianoComponent) {\r\n  setTimeout(function () {\r\n    var piano = pianoComponent.piano\r\n    for (let i = 0; i < piano.length; i++) {\r\n      var pianoOctave = piano[i]\r\n\r\n      for (let z = 0; z < pianoOctave.length; z++) {\r\n        var key = pianoOctave[z]\r\n        if (key.isPlaying) {\r\n          key.isPlaying = false\r\n          key.isStopping = true\r\n        }\r\n      }\r\n    }\r\n\r\n    dispatch({\r\n      type: \"UPDATE_PIANO\",\r\n      id: pianoComponent.id,\r\n      payload: pianoComponent.piano\r\n    })\r\n  }, 1500)\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\"\r\nimport Navbar from \"react-bootstrap/Navbar\"\r\nimport Button from \"react-bootstrap/Button\"\r\nimport \"../../styles/Layout.css\"\r\nimport { AppContext } from \"../context/AppContext\"\r\nimport { playPiano } from \"../../utils/synthPlayer\"\r\nimport { isSlashChord } from \"../../utils/chordCodeHandler\"\r\nimport { Link, scroller } from \"react-scroll\"\r\nimport { isMobile } from \"react-device-detect\"\r\n\r\nexport const HeaderComponent = () => {\r\n  const { state, dispatch } = useContext(AppContext)\r\n\r\n  const [newChordAdded, setNewChordAdded] = useState(false)\r\n\r\n  const offset = -130\r\n\r\n  const handleClickAddChord = () => {\r\n    dispatch({\r\n      type: \"ADD_CHORD_PIANO\",\r\n      payload: \"selectedKey\"\r\n    })\r\n    setNewChordAdded(true)\r\n  }\r\n\r\n  useEffect(() => {\r\n    //console.log(\"render\")\r\n\r\n    if (!state.chordPianoSet || state.chordPianoSet.length < 1) return\r\n\r\n    if (newChordAdded) {\r\n      //(state)\r\n      var targetKey =\r\n        \"piano-\" + state.chordPianoSet[state.chordPianoSet.length - 1].id\r\n\r\n      //console.log(targetKey)\r\n      //console.log(state.chordPianoSet)\r\n      scroller.scrollTo(targetKey, {\r\n        duration: 500,\r\n        smooth: true,\r\n        offset: offset,\r\n        spy: true,\r\n        hashSpy: true,\r\n        to: targetKey\r\n      })\r\n\r\n      setNewChordAdded(false)\r\n    }\r\n  }, [state.chordPianoSet])\r\n\r\n  const handleClickClear = () => {\r\n    dispatch({\r\n      type: \"BUILD_PROG_FROM_CODE\",\r\n      payload: \"\"\r\n    })\r\n  }\r\n\r\n  const handleUndoClick = () => {\r\n    dispatch({\r\n      type: \"LOAD_PREVIOUS_PROG_CODE\",\r\n      payload: \"\"\r\n    })\r\n  }\r\n\r\n  const handleItemClick = (id) => {\r\n    //console.log(\"clicked \" + id)\r\n\r\n    playPiano(dispatch, state, id)\r\n  }\r\n\r\n  const renderProgression = () => {\r\n    return state.chordPianoSet.map((piano, i) => {\r\n      return (\r\n        <>\r\n          <Link\r\n            className=\"chordListItem\"\r\n            to={\"piano-\" + piano.id}\r\n            spy={true}\r\n            offset={offset}\r\n            isDynamic={true}\r\n            duration={500}\r\n            smooth={true}\r\n            key={piano.id}\r\n            onClick={(id) => handleItemClick(piano.id)}\r\n          >\r\n            <div className=\"chordItem\">\r\n              &nbsp;{piano.selectedChord.noteLetter}\r\n              {piano.selectedChord.type}\r\n              {isSlashChord(piano.selectedChord)\r\n                ? \"/\" + piano.selectedChord.slashNote\r\n                : \"\"}\r\n            </div>\r\n          </Link>\r\n          &nbsp;{i !== state.chordPianoSet.length - 1 ? \"|\" : \"\"}\r\n        </>\r\n      )\r\n    })\r\n  }\r\n  return (\r\n    <>\r\n      <Navbar fixed=\"top\" className=\"flex-column mainHeader\">\r\n        <div className=\"headerContainer\">\r\n          <div className=\"buttonContainer row\">\r\n            <Button\r\n              variant=\"primary\"\r\n              size=\"sm\"\r\n              className=\"btn-main chord-btn \"\r\n              onClick={() => handleClickAddChord()}\r\n            >\r\n              Add\r\n            </Button>\r\n            <Button\r\n              variant=\"primary\"\r\n              size=\"sm\"\r\n              className=\"btn-main chord-btn\"\r\n              onClick={() => handleUndoClick()}\r\n            >\r\n              Undo\r\n            </Button>\r\n            <Button\r\n              variant=\"primary\"\r\n              size=\"sm\"\r\n              className=\"btn-main chord-btn\"\r\n              onClick={() => handleClickClear()}\r\n            >\r\n              Clear\r\n            </Button>\r\n          </div>\r\n          <ul className=\"progression row\" style={{ listStyle: \"none\" }}>\r\n            {renderProgression()}\r\n          </ul>\r\n        </div>\r\n      </Navbar>\r\n    </>\r\n  )\r\n}\r\n","import React from \"react\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nexport const Key = ({ pianoKey, handleClick }) => {\r\n  return (\r\n    <>\r\n      <li\r\n        key-selected={`${pianoKey.selected}`}\r\n        key-playing={`${pianoKey.isPlaying}`}\r\n        key-stopping={`${\r\n          pianoKey.isStopping !== null ? pianoKey.isStopping : null\r\n        }`}\r\n        className={`${pianoKey.color} ${pianoKey.note} ${pianoKey.note}-${pianoKey.octave}`}\r\n        onClick={() =>\r\n          handleClick(pianoKey.note, pianoKey.noteNumber, pianoKey.octave)\r\n        }\r\n      ></li>\r\n    </>\r\n  )\r\n}\r\n\r\nKey.propTypes = {\r\n  pianoKey: PropTypes.object.isRequired,\r\n  handleClick: PropTypes.func\r\n}\r\n","import React, { useContext } from \"react\"\r\nimport \"../styles/Piano.css\"\r\nimport { Key } from \"./Key\"\r\nimport { AppContext, getPianoById } from \"../components/context/AppContext\"\r\nimport { getNoteLetter } from \"../utils/noteManager\"\r\nimport { playPiano } from \"../utils/synthPlayer\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nexport const PianoComponent = ({ pianoComponentId }) => {\r\n  const { state, dispatch } = useContext(AppContext)\r\n  const pianoId = pianoComponentId\r\n\r\n  const handleClick = (note, noteNumber, octave) => {\r\n    const noteLetter = getNoteLetter(\"C\", noteNumber)\r\n    //console.log(`You've clicked note: ${pianoId} - ${octave} - ${noteLetter}`)\r\n\r\n    var selectedKey = {}\r\n    selectedKey.noteLetter = noteLetter\r\n    selectedKey.octave = octave\r\n    dispatch({\r\n      type: \"UPDATE_KEY\",\r\n      id: pianoId,\r\n      payload: selectedKey\r\n    })\r\n  }\r\n\r\n  const handleClickRemovePiano = () => {\r\n    dispatch({\r\n      type: \"REMOVE_PIANO\",\r\n      id: pianoId\r\n    })\r\n  }\r\n\r\n  const handlePlayClick = () => {\r\n    playPiano(dispatch, state, pianoId)\r\n  }\r\n\r\n  const renderPiano = () => {\r\n    let piano = getPianoById(state, pianoId).piano\r\n    //console.log(piano)\r\n    return piano.map((octave, i) => {\r\n      return octave.map((pianoKey) => {\r\n        pianoKey.octave = i\r\n        return (\r\n          <Key\r\n            key={`${pianoKey.note}-${i}`}\r\n            pianoKey={pianoKey}\r\n            handleClick={() =>\r\n              handleClick(pianoKey.note, pianoKey.noteNumber, pianoKey.octave)\r\n            }\r\n          />\r\n        )\r\n      })\r\n    })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"pianoContainer\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"piano-play-button\"\r\n          onClick={() => handlePlayClick()}\r\n        ></button>\r\n        <div className=\"pianoBox\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"close pianoCloseButton\"\r\n            aria-label=\"Close\"\r\n            onClick={() => handleClickRemovePiano()}\r\n          >\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n          <ul className=\"set\">{renderPiano()}</ul>\r\n        </div>\r\n        <div className=\"closeContainer\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"close pianoCloseButtonMobile\"\r\n            aria-label=\"Close\"\r\n            onClick={() => handleClickRemovePiano()}\r\n          >\r\n            <span className=\"mobileClosedBtnText\">&times;</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nPianoComponent.propTypes = {\r\n  pianoComponentId: PropTypes.number.isRequired\r\n}\r\n","import { React, useContext, useRef, useEffect } from \"react\"\r\nimport Form from \"react-bootstrap/Form\"\r\nimport { noteLetterMapWithSharps } from \"../utils/noteManager\"\r\nimport { chordMap } from \"../utils/chordManager\"\r\nimport { selectChordKeys, hasSelectedNotes } from \"../utils/chordPianoHandler\"\r\nimport { AppContext, getPianoById } from \"../components/context/AppContext\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nexport const ChordInput = ({ pianoComponentId }) => {\r\n  const { state, dispatch } = useContext(AppContext)\r\n  const chordRef = useRef({})\r\n\r\n  //console.log(\"rendered piano component id: \" + pianoComponentId)\r\n  var chordPiano = getPianoById(state, pianoComponentId)\r\n\r\n  chordRef.current.isProgKey = chordPiano.isProgKey ?? false\r\n  chordRef.current.selectedChordKey = chordPiano.selectedKey.noteLetter ?? \"C\"\r\n  chordRef.current.type = chordPiano.selectedChord.type\r\n  chordRef.current.id = chordPiano.id\r\n  chordRef.current.slashChord = chordPiano.selectedChord.slash ?? false\r\n  chordRef.current.slashNote = chordPiano.selectedChord.slashNote ?? \"\"\r\n\r\n  useEffect(() => {\r\n    // if no keys are selected, load the selected chord\r\n    if (!hasSelectedNotes(chordPiano.piano)) {\r\n      selectChordKeys(chordPiano)\r\n    }\r\n\r\n    if (!state.building) {\r\n      selectChordKeys(chordPiano)\r\n    }\r\n  })\r\n\r\n  // processes new key selections\r\n  const handleKeySelectChange = (e) => {\r\n    if (e.target.value === null) return\r\n\r\n    chordPiano.selectedKey.noteLetter = e.target.value\r\n\r\n    dispatch({\r\n      type: \"UPDATE_KEY\",\r\n      id: chordPiano.id,\r\n      payload: {\r\n        noteLetter: e.target.value,\r\n        octave: chordPiano.selectedKey.octave ?? 0\r\n      }\r\n    })\r\n  }\r\n\r\n  // processes new chord type selections\r\n  const handleTypeSelectChange = (e) => {\r\n    chordRef.current.type = e.target.value\r\n\r\n    //console.log(chordRef.current.type)\r\n\r\n    dispatch({\r\n      type: \"UPDATE_CHORD_TYPE\",\r\n      id: chordPiano.id,\r\n      chordType: chordRef.current.type\r\n    })\r\n  }\r\n\r\n  // set whether this chord has the progression key\r\n  const handleIsKeyChecked = (e) => {\r\n    //console.log(e.target.checked)\r\n    //console.log(chordRef.current.type)\r\n\r\n    dispatch({\r\n      type: \"SET_PROG_KEY\",\r\n      keyChecked: e.target.checked,\r\n      id: chordPiano.id\r\n    })\r\n  }\r\n\r\n  // set whether this chord has the progression key\r\n  const handleIsSlashChordChecked = (e) => {\r\n    //console.log(e.target.checked)\r\n    //console.log(chordRef.current.type)\r\n\r\n    chordRef.current.slashChord = e.target.checked\r\n    dispatch({\r\n      type: \"UPDATE_SLASH_CHORD\",\r\n      isSlashChord: chordRef.current.slashChord,\r\n      id: chordPiano.id\r\n    })\r\n  }\r\n\r\n  // processes new key selections\r\n  const handleSlashChordNoteChange = (e) => {\r\n    if (e.target.value === null) return\r\n\r\n    chordRef.current.slashNote = e.target.value\r\n\r\n    dispatch({\r\n      type: \"UPDATE_SLASH_CHORD\",\r\n      isSlashChord: chordRef.current.slashChord,\r\n      slashNote: chordRef.current.slashNote,\r\n      id: chordPiano.id\r\n    })\r\n  }\r\n\r\n  var chordTypeArray = Object.keys(chordMap)\r\n  var noteArray = Object.values(noteLetterMapWithSharps)\r\n\r\n  return (\r\n    <Form className=\"chordInputForm\">\r\n      <Form.Group controlId=\"chordSelection\">\r\n        <div className=\"chordInputSelection keySelection\">\r\n          <Form.Control\r\n            as=\"select\"\r\n            value={chordRef.current.selectedChordKey}\r\n            custom\r\n            className=\"selectorBox\"\r\n            onChange={(e) => handleKeySelectChange(e)}\r\n          >\r\n            {noteArray.map((option, index) => {\r\n              return (\r\n                <option key={index} value={option}>\r\n                  {option}\r\n                </option>\r\n              )\r\n            })}\r\n          </Form.Control>\r\n        </div>\r\n        <div className=\"chordInputSelection typeSelection\">\r\n          <Form.Control\r\n            className=\"selectorBox\"\r\n            as=\"select\"\r\n            value={chordRef.current.type}\r\n            custom\r\n            onChange={(e) => handleTypeSelectChange(e)}\r\n          >\r\n            {chordTypeArray.map((option, index) => {\r\n              return (\r\n                <option key={index} value={option}>\r\n                  {option}\r\n                </option>\r\n              )\r\n            })}\r\n          </Form.Control>\r\n        </div>\r\n        <Form.Check\r\n          type=\"checkbox\"\r\n          key={Number(chordRef.current.id)}\r\n          label=\"key\"\r\n          checked={chordRef.current.isProgKey}\r\n          className=\"keyCheckBox chordCheckBox\"\r\n          onChange={(e) => handleIsKeyChecked(e)}\r\n        />\r\n        <Form.Check\r\n          type=\"checkbox\"\r\n          key={\"slash\" + chordRef.current.id}\r\n          label=\"slash\"\r\n          checked={chordRef.current.slashChord}\r\n          className=\"slashCheckBox chordCheckBox\"\r\n          onChange={(e) => handleIsSlashChordChecked(e)}\r\n        />\r\n        <div className=\"slashSelection\">\r\n          <div\r\n            className=\"slashSymbol\"\r\n            display-option={`${chordRef.current.slashChord}`}\r\n          >\r\n            {\"/\"}\r\n          </div>\r\n          <div\r\n            className=\"slashChordSelection\"\r\n            display-option={`${chordRef.current.slashChord}`}\r\n          >\r\n            <Form.Control\r\n              className=\"selectorBox slashSelectorBox\"\r\n              as=\"select\"\r\n              value={chordRef.current.slashNote}\r\n              custom\r\n              onChange={(e) => handleSlashChordNoteChange(e)}\r\n            >\r\n              {noteArray.concat(\"\").map((option, index) => {\r\n                return (\r\n                  <option key={index} value={option}>\r\n                    {option}\r\n                  </option>\r\n                )\r\n              })}\r\n            </Form.Control>\r\n          </div>\r\n        </div>\r\n      </Form.Group>\r\n    </Form>\r\n  )\r\n}\r\n\r\nChordInput.propTypes = {\r\n  pianoComponentId: PropTypes.number.isRequired\r\n}\r\n","import React from \"react\"\r\nimport \"../styles/Piano.css\"\r\nimport { PianoComponent } from \"./PianoComponent\"\r\nimport { ChordInput } from \"./ChordInput\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nexport const ChordPianoComponent = ({ pianoComponentId }) => {\r\n  return (\r\n    <>\r\n      <div className=\"container chordPiano\" id={\"piano-\" + pianoComponentId}>\r\n        <div className=\"contentBox row\">\r\n          <div className=\"pianoChordBox\">\r\n            <ChordInput\r\n              key={`c-${pianoComponentId}`}\r\n              className=\"chordBox\"\r\n              pianoComponentId={pianoComponentId}\r\n            />\r\n            <PianoComponent\r\n              key={Number(pianoComponentId)}\r\n              className=\"pianoBox\"\r\n              pianoComponentId={Number(pianoComponentId)}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nChordPianoComponent.propTypes = {\r\n  pianoComponentId: PropTypes.number.isRequired\r\n}\r\n","import React, { useContext, useEffect } from \"react\"\r\nimport \"../styles/Piano.css\"\r\nimport { AppContext } from \"../components/context/AppContext\"\r\nimport { getProgressionCode } from \"../utils/chordCodeHandler\"\r\nimport { ChordPianoComponent } from \"../components/ChordPianoComponent\"\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nexport const PianoBoardComponent = () => {\r\n  const { state, dispatch } = useContext(AppContext)\r\n\r\n  const history = useHistory()\r\n  state.history = history\r\n\r\n  const [, updateState] = React.useState()\r\n  const forceUpdate = React.useCallback(() => updateState({}), [])\r\n\r\n  useEffect(() => {\r\n    //console.log(\"render\")\r\n    forceUpdate()\r\n  }, [state.chordPianoSet, forceUpdate])\r\n\r\n  buildChordsFromUrl(state, history, dispatch)\r\n\r\n  const renderChordPianoSet = () => {\r\n    return state.chordPianoSet.map((chordPiano) => (\r\n      <div key={chordPiano.id}>\r\n        <ChordPianoComponent\r\n          id={\"piano-\" + chordPiano.id}\r\n          key={\"piano-\" + chordPiano.id}\r\n          className=\"row chordPianoComponent\"\r\n          pianoComponentId={Number(chordPiano.id)}\r\n          history={history}\r\n        />\r\n        <div key={\"strip-\" + chordPiano.id} className=\"pianoStrip\" />\r\n      </div>\r\n    ))\r\n  }\r\n\r\n  return (\r\n    <div key=\"pianoBoard\" className=\"pianoBoard\">\r\n      {renderChordPianoSet()}\r\n      <div className=\"pianoBoardGutter\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction buildChordsFromUrl(state, history, dispatch) {\r\n  var currentCode = getProgressionCode(state)\r\n\r\n  var newParams = history.location.search.replace(\"?prog=\", \"\")\r\n  newParams += history.location.hash\r\n\r\n  if (!state.building && currentCode !== newParams) {\r\n    console.log(\"New chord code provided \" + currentCode + \" vs \" + newParams)\r\n\r\n    dispatch({\r\n      type: \"BUILD_PROG_FROM_CODE\",\r\n      payload: newParams\r\n    })\r\n  }\r\n}\r\n","import React from \"react\"\r\nimport Navbar from \"react-bootstrap/Navbar\"\r\nimport Modal from \"react-bootstrap/Modal\"\r\nimport \"../../styles/Layout.css\"\r\nimport GitHub120 from \"../../public/images/GitHub120.png\"\r\n\r\nexport const FooterComponent = () => {\r\n  const [modalShow, setModalShow] = React.useState(false)\r\n\r\n  function AboutModal(props) {\r\n    return (\r\n      <Modal\r\n        {...props}\r\n        size=\"l\"\r\n        className=\"aboutModal\"\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered\r\n      >\r\n        <Modal.Header className=\"modalHeader\" closeButton>\r\n          <div className=\"headerBackground\" />\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p className=\"aboutDescriptionText\">\r\n            Chord Buildr provides an easy way for musicians and music lovers to\r\n            create and share chord progressions.\r\n          </p>\r\n          <hr className=\"aboutLine\" />\r\n          <p>\r\n            <h6>\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                fill=\"currentColor\"\r\n                class=\"bi bi-music-note\"\r\n                viewBox=\"0 0 16 16\"\r\n              >\r\n                <path d=\"M9 13c0 1.105-1.12 2-2.5 2S4 14.105 4 13s1.12-2 2.5-2 2.5.895 2.5 2z\" />\r\n                <path fill-rule=\"evenodd\" d=\"M9 3v10H8V3h1z\" />\r\n                <path d=\"M8 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 13 2.22V4L8 5V2.82z\" />\r\n              </svg>{\" \"}\r\n              transpose\r\n            </h6>\r\n            <div className=\"aboutFeatureText\">\r\n              Mark a chord as the key and the rest of your progression will\r\n              transpose as you change its root note.{\" \"}\r\n            </div>\r\n            <br />\r\n            <h6>\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                fill=\"currentColor\"\r\n                class=\"bi bi-music-note-beamed\"\r\n                viewBox=\"0 0 16 16\"\r\n              >\r\n                <path d=\"M6 13c0 1.105-1.12 2-2.5 2S1 14.105 1 13c0-1.104 1.12-2 2.5-2s2.5.896 2.5 2zm9-2c0 1.105-1.12 2-2.5 2s-2.5-.895-2.5-2 1.12-2 2.5-2 2.5.895 2.5 2z\" />\r\n                <path fill-rule=\"evenodd\" d=\"M14 11V2h1v9h-1zM6 3v10H5V3h1z\" />\r\n                <path d=\"M5 2.905a1 1 0 0 1 .9-.995l8-.8a1 1 0 0 1 1.1.995V3L5 4V2.905z\" />\r\n              </svg>{\" \"}\r\n              share\r\n            </h6>\r\n            <div className=\"aboutFeatureText\">\r\n              To share a progression, simply copy the URL. No account needed!\r\n            </div>\r\n            <br />\r\n          </p>\r\n          {/* <hr className=\"aboutLine\"/> */}\r\n          <p className=\"creditsText\">\r\n            Chord Buildr is an{\" \"}\r\n            <a\r\n              className=\"modalText\"\r\n              href=\"https://github.com/jekrch/chord-buildr\"\r\n            >\r\n              open source\r\n            </a>{\" \"}\r\n            project <br /> by{\" \"}\r\n            <a className=\"modalText\" href=\"https://www.jacobkrch.com\">\r\n              Jacob Krch\r\n            </a>{\" \"}\r\n            and{\" \"}\r\n            <a\r\n              className=\"modalText\"\r\n              href=\"https://www.linkedin.com/in/teran-keith-210941107/\"\r\n            >\r\n              Teran Keith\r\n            </a>\r\n          </p>\r\n          <p className=\"copyrightText\">\r\n            &copy; 2020-\r\n            {new Date().getFullYear()} Jacob Krch All Rights Reserved\r\n          </p>\r\n        </Modal.Body>\r\n      </Modal>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Navbar className=\"footNav\" fixed=\"bottom\">\r\n        <Navbar.Brand href=\"https://github.com/jekrch/chord-buildr\">\r\n          <img className=\"gitSrc\" src={GitHub120} alt=\"github\" />\r\n        </Navbar.Brand>{\" \"}\r\n        <div className=\"footNavText\">v1.1</div>\r\n        <div className=\"footNavAbout\" onClick={() => setModalShow(true)}>\r\n          about\r\n        </div>\r\n        <AboutModal show={modalShow} onHide={() => setModalShow(false)} />\r\n        <h1 className=\"titleText\">chord buildr</h1>\r\n      </Navbar>\r\n    </>\r\n  )\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwQTM4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwQTI4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTMyOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjJBNDE0QUJDOTlBMTExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8kSqyAAADD5JREFUeNrsXQ2Q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\"","import \"./App.css\"\r\nimport React from \"react\"\r\nimport { Route, Switch } from \"react-router\"\r\nimport { BrowserRouter as Router } from \"react-router-dom\"\r\nimport { AppProvider } from \"./components/context/AppContext\"\r\nimport { HeaderComponent } from \"./components/Layout\"\r\nimport { PianoBoardComponent } from \"./components/PianoBoardComponent\"\r\nimport { FooterComponent } from \"./components/Layout/FooterComponent\"\r\n\r\nexport const App = () => {\r\n  return (\r\n    <div className=\"App\">\r\n      <AppProvider>\r\n        <HeaderComponent />\r\n        <div className=\" mainContainer\">\r\n          <Router>\r\n            <Switch>\r\n              <Route\r\n                exact\r\n                path={[\"/\", \"/chord-buildr/\"]}\r\n                component={PianoBoardComponent}\r\n              />\r\n            </Switch>\r\n          </Router>\r\n        </div>\r\n        <FooterComponent />\r\n      </AppProvider>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport \"bootstrap/dist/css/bootstrap.min.css\"\r\nimport \"./index.css\"\r\nimport App from \"./App\"\r\nimport reportWebVitals from \"./reportWebVitals\"\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n"],"sourceRoot":""}